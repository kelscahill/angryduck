System.register([],(function(e,o){"use strict";return{execute:function(){!function(e,o,l,n,t,c,i){const{CART_STORE_KEY:s}=e.wc.wcBlocksData,{getCartData:u}=e.wp.data.select(s),r=(l=!0)=>{if("no"===e.wwppObj.onlyAllowWholesalePurchases)return;const n=o.querySelector(".wp-block-woocommerce-proceed-to-checkout-block .wc-block-cart__submit-button"),t=o.querySelector(".wp-block-woocommerce-proceed-to-checkout-block .wwpp-notice");if(l&&null==t){var c,i;const l=o.createElement("h4");l.innerText=e.wwppObj.i18n.minOrderQtyNotice,l.classList.add("wwpp-notice"),null==n||null===(c=n.parentNode)||void 0===c||c.insertBefore(l,n.nextSibling),null===(i=o.querySelector("body"))||void 0===i||null===(i=i.classList)||void 0===i||i.add("wwpp-block-cart-checkout-btn-hide")}else if(!l&&null!=t){var s;null===(s=o.querySelector("body"))||void 0===s||null===(s=s.classList)||void 0===s||s.remove("wwpp-block-cart-checkout-btn-hide"),null==t||t.remove()}},d=(e=!1)=>{o.querySelectorAll(".woocommerce-info").forEach((l=>{l&&l.contains(o.querySelector(".wwpp-notice"))&&(null===a||e)&&l.remove()}))},w=e=>{const o=null==e?void 0:e.filter((e=>{var o;return null!=(null==e||null===(o=e.extensions)||void 0===o||null===(o=o.wwpp_block)||void 0===o||null===(o=o.notices)||void 0===o?void 0:o.message)})),l=null==o?void 0:o.map((e=>o.length>1?`<p>${e.extensions.wwpp_block.notices.message}</p>`:e.extensions.wwpp_block.notices.message));return(null==l?void 0:l.length)>0?l.join(""):null};let a=w((null===(l=u())||void 0===l?void 0:l.items)||[])||(null===(n=u())||void 0===n||null===(n=n.extensions)||void 0===n||null===(n=n.wwpp_block)||void 0===n||null===(n=n.notices)||void 0===n?void 0:n.message)||null;const p=()=>{var l;d(!0),e.wp.data.dispatch("core/notices").removeNotice("wwpp-block-notice","wc/cart"),a=null,null===(l=o.querySelector("body"))||void 0===l||l.classList.remove("wwpp-block-notice"),r(!1)},v=l=>{var n;e.wp.data.dispatch("core/notices").createInfoNotice(l,{id:"wwpp-block-notice",context:"wc/cart"}),a=l,null===(n=o.querySelector("body"))||void 0===n||n.classList.add("wwpp-block-notice"),r()},b=window.lodash.debounce((()=>{var e,o;const l=u();if(null!=(null==l||null===(e=l.extensions)||void 0===e||null===(e=e.wwpp_block)||void 0===e?void 0:e.notices)||null!=w((null==l?void 0:l.items)||[])){const e=l.extensions.wwpp_block.notices,o=w((null==l?void 0:l.items)||[]);d(),r(),null!=o&&a!==o&&(null==l?void 0:l.items.length)>0?(d(!0),v(w(l.items))):null==o&&null!=e&&e.message&&a!==e.message&&(null==l?void 0:l.items.length)>0?(d(!0),v(e.message)):0===(null==l?void 0:l.items.length)&&null!=a&&p()}else(null==(null==l||null===(o=l.extensions)||void 0===o||null===(o=o.wwpp_block)||void 0===o?void 0:o.notices)&&null!=a&&null==w((null==l?void 0:l.items)||[])&&null!=a||0===(null==l?void 0:l.items.length))&&p()}),500),m=(l,n)=>{var t,c;if(null!=(null===(t=u())||void 0===t||null===(t=t.extensions)||void 0===t||null===(t=t.wwpp_block)||void 0===t?void 0:t.notices)||null!=w((null===(c=u())||void 0===c?void 0:c.items)||[]))for(let i of l)"childList"===i.type&&i.addedNodes.forEach((l=>{if(l instanceof HTMLElement&&(l.matches(".wp-block-woocommerce-checkout-actions-block")||l.matches(".wp-block-woocommerce-checkout-fields-block"))){const c=l.querySelector(".wc-block-checkout__actions_row .wc-block-components-checkout-place-order-button");if(n.disconnect(),c){var t;null==c||c.remove();const n=o.createElement("h4");n.innerText=e.wwppObj.i18n.minOrderQtyNotice,n.classList.add("wwpp-notice"),n.setAttribute("style","margin-top: 1rem;");const i=l.querySelector(".wc-block-checkout__actions_row");null==i||null===(t=i.parentNode)||void 0===t||t.insertBefore(n,i.nextSibling)}}}));else n.disconnect()};null!==(t=e.wwppObj)&&void 0!==t&&t.isCartBlock?e.wp.data.subscribe(b):null!==(c=e.wwppObj)&&void 0!==c&&c.isCheckoutBlock&&"yes"===(null===(i=e.wwppObj)||void 0===i?void 0:i.onlyAllowWholesalePurchases)&&new MutationObserver(m).observe(o.body,{childList:!0,subtree:!0})}(window,document)}}}));
