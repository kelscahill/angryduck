import{x as _,aw as g,g as C,d as L,a4 as U,s as G,B as $,C as y,a3 as q,b6 as w,aj as B,A as J,c as K,D as Q,w as X,n as Y}from"./LoadingOutlined.BFkAxzyV.js";import{i as Z}from"./isVisible.BHYmLg1T.js";import{u as l}from"./useState.L1hofs5h.js";import{w as S}from"./raf.Deuc0E8-.js";const ee=e=>{const{componentCls:t,colorPrimary:o}=e;return{[t]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:"var(--wave-color, ".concat(o,")"),boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:["box-shadow 0.4s ".concat(e.motionEaseOutCirc),"opacity 2s ".concat(e.motionEaseOutCirc)].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0}}}}},te=_("Wave",e=>[ee(e)]);function oe(e){const t=(e||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return t&&t[1]&&t[2]&&t[3]?!(t[1]===t[2]&&t[2]===t[3]):!0}function b(e){return e&&e!=="#fff"&&e!=="#ffffff"&&e!=="rgb(255, 255, 255)"&&e!=="rgba(255, 255, 255, 1)"&&oe(e)&&!/rgba\((?:\d*, ){3}0\)/.test(e)&&e!=="transparent"}function ae(e){const{borderTopColor:t,borderColor:o,backgroundColor:r}=getComputedStyle(e);return b(t)?t:b(o)?o:b(r)?r:null}function h(e){return Number.isNaN(e)?0:e}const ne=L({props:{target:U(),className:String},setup(e){const t=G(null),[o,r]=l(null),[d,i]=l([]),[c,m]=l(0),[u,p]=l(0),[a,v]=l(0),[O,k]=l(0),[I,j]=l(!1);function W(){const{target:n}=e,s=getComputedStyle(n);r(ae(n));const R=s.position==="static",{borderLeftWidth:A,borderTopWidth:D}=s;m(R?n.offsetLeft:h(-parseFloat(A))),p(R?n.offsetTop:h(-parseFloat(D))),v(n.offsetWidth),k(n.offsetHeight);const{borderTopLeftRadius:F,borderTopRightRadius:H,borderBottomLeftRadius:M,borderBottomRightRadius:P}=s;i([F,H,P,M].map(V=>h(parseFloat(V))))}let f,x,T;const E=()=>{clearTimeout(T),S.cancel(x),f==null||f.disconnect()},N=()=>{var n;const s=(n=t.value)===null||n===void 0?void 0:n.parentElement;s&&(g(null,s),s.parentElement&&s.parentElement.removeChild(s))};$(()=>{E(),T=setTimeout(()=>{N()},5e3);const{target:n}=e;n&&(x=S(()=>{W(),j(!0)}),typeof ResizeObserver<"u"&&(f=new ResizeObserver(W),f.observe(n)))}),y(()=>{E()});const z=n=>{n.propertyName==="opacity"&&N()};return()=>{if(!I.value)return null;const n={left:"".concat(c.value,"px"),top:"".concat(u.value,"px"),width:"".concat(a.value,"px"),height:"".concat(O.value,"px"),borderRadius:d.value.map(s=>"".concat(s,"px")).join(" ")};return o&&(n["--wave-color"]=o.value),C(q,{appear:!0,name:"wave-motion",appearFromClass:"wave-motion-appear",appearActiveClass:"wave-motion-appear",appearToClass:"wave-motion-appear wave-motion-appear-active"},{default:()=>[C("div",{ref:t,class:e.className,style:n,onTransitionend:z},null)]})}}});function re(e,t){const o=document.createElement("div");return o.style.position="absolute",o.style.left="0px",o.style.top="0px",e==null||e.insertBefore(o,e==null?void 0:e.firstChild),g(C(ne,{target:e,className:t},null),o),()=>{g(null,o),o.parentElement&&o.parentElement.removeChild(o)}}function se(e,t){const o=B();let r;function d(){var i;const c=w(o);r==null||r(),!(!((i=t==null?void 0:t.value)===null||i===void 0)&&i.disabled||!c)&&(r=re(c,e.value))}return y(()=>{r==null||r()}),d}const ue=L({compatConfig:{MODE:3},name:"Wave",props:{disabled:Boolean},setup(e,t){let{slots:o}=t;const r=B(),{prefixCls:d,wave:i}=J("wave",e),[,c]=te(d),m=se(K(()=>Q(d.value,c.value)),i);let u;const p=()=>{w(r).removeEventListener("click",u,!0)};return $(()=>{X(()=>e.disabled,()=>{p(),Y(()=>{const a=w(r);a==null||a.removeEventListener("click",u,!0),!(!a||a.nodeType!==1||e.disabled)&&(u=v=>{v.target.tagName==="INPUT"||!Z(v.target)||!a.getAttribute||a.getAttribute("disabled")||a.disabled||a.className.includes("disabled")||a.className.includes("-leave")||m()},a.addEventListener("click",u,!0))})},{immediate:!0,flush:"post"})}),y(()=>{p()}),()=>{var a;return(a=o.default)===null||a===void 0?void 0:a.call(o)[0]}}});export{ue as W};
