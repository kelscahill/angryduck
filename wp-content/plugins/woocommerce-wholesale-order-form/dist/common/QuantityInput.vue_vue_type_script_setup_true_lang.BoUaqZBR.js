import{d as O,G as S,c as a,b,o as s,f,N as C,K as B,L as T,k as A,u as c}from"./LoadingOutlined.BFkAxzyV.js";import{a4 as I,u as N,k as p,_ as P,c as D,X as q,a5 as d,b as F}from"./index.Ith4SzXf.js";import{I as K}from"./index.BYWy4BdB.js";const x=["id"],$=O({__name:"QuantityInput",props:{product:{},columnId:{default:()=>{var e;return(e=I("quantity-input"))==null?void 0:e.id}}},setup(e){const y=N(),{quantities:r}=S(y),{emit:w}=p("wwofCurrentProductQuantity".concat(e.product.id)),{on:k}=p("wwofSelectedVariation".concat(e.product.id)),g=a(()=>{var t;return(t=P(e.columnId,"outOfStockText"))!=null?t:D("outOfStock",wp.i18n.__("Out of stock","woocommerce-wholesale-order-form"))}),n=b(q(e.product).value),v=a(()=>{const{minOrderQty:t}=d(n.value);return t});k(t=>{var o;t&&(n.value=t,(o=e.product)!=null&&o.parent_id||(r.value[e.product.id]=Number(d(t).minOrderQty)))});const u=a(()=>{const{orderQtyStep:t}=d(n.value);return t}),Q=t=>{const o=["Backspace","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Delete","Tab","Enter"];t.key.match(/[^0-9]/)&&!o.includes(t.key)&&t.preventDefault()},h=t=>{u.value%t!==0&&(t=Math.round(t/u.value)*u.value),r.value[e.product.id]=Number(t),r.value[n.value.id]=Number(t),w(t)};return(t,o)=>{var i,l,m;return s(),f("div",{id:"quantity-".concat(t.product.id),class:"quantity-box"},[t.product.stock_status==="outofstock"?(s(),f(C,{key:0},[B(T(g.value),1)],64)):(s(),A(c(K),{key:1,value:(i=c(r))==null?void 0:i[t.product.id],size:"large",min:((m=(l=c(F)())==null?void 0:l.wwppSettings)==null?void 0:m.allowAddToCartBelowProductMinimum)==="yes"?1:v.value,step:u.value,onKeydown:Q,onChange:h},null,8,["value","min","step"]))],8,x)}}});export{$ as _};
