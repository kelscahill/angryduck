!function(){function e(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function t(t){for(var r=1;r<arguments.length;r++){var l=null!=arguments[r]?arguments[r]:{};r%2?e(Object(l),!0).forEach((function(e){o(t,e,l[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(l)):e(Object(l)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(l,e))}))}return t}function o(e,t,o){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}System.register(["./LoadingOutlined-legacy.CPhLaklC.js","./index-legacy.BXaB4RSa.js","./currency-context-legacy.CeSwfyD0.js","./index-legacy.XsgHM641.js"],(function(e,o){"use strict";var r,l,n,a,i,u,c,d,s,p,v,w,y,m,_,b,f,g,h,O,j,P;return{setters:[e=>{r=e.d,l=e.i,n=e.G,a=e.c,i=e.o,u=e.k,c=e.l,d=e.f,s=e.N,p=e.K,v=e.L,w=e.J,y=e.u,m=e.O},e=>{_=e.u,b=e.c,f=e.X,g=e.b,h=e.p,O=e.Y},e=>{j=e.C},e=>{P=e.T}],execute:function(){const o=["innerHTML"];e("_",r({__name:"QuantityBasedPricingTable",props:{product:{}},setup(e){const r=l("$window"),S=_(),{isCardFormat:T}=n(S),q=[{title:b("quantity",wp.i18n.__("Quantity","woocommerce-wholesale-order-form")),dataIndex:"discountTableQty",key:"discountTableQty",class:"discount-table-qty",customCell:()=>({"data-label":b("quantity",wp.i18n.__("Quantity","woocommerce-wholesale-order-form"))})},{title:b("price",wp.i18n.__("Price","woocommerce-wholesale-order-form")),dataIndex:"discountTablePrice",key:"discountTablePrice",class:"discount-table-price",customCell:()=>({"data-label":b("price",wp.i18n.__("Price","woocommerce-wholesale-order-form"))})},{title:b("save",wp.i18n.__("Save","woocommerce-wholesale-order-form")),dataIndex:"discountTableSave",key:"discountTableSave",class:"discount-table-save",customCell:()=>({"data-label":b("save",wp.i18n.__("Save","woocommerce-wholesale-order-form"))})}],k=a((()=>{var o,r;if("variable"===(null===(o=e.product)||void 0===o?void 0:o.type)){var l,n;const o=f(e.product).value;if("yes"===(null==o||null===(l=o.wholesale_data)||void 0===l?void 0:l.wwpp_enable_quantity_discount_rule)&&(null==o||null===(n=o.wholesale_data)||void 0===n||null===(n=n.wwpp_quantity_discount_rule_mapping)||void 0===n||null===(n=n.mapping)||void 0===n?void 0:n.length)>0)return o.wholesale_data.wwpp_quantity_discount_rule_mapping.mapping.reduce(((e,o)=>{var r;return(null==o?void 0:o.wholesale_role)===(null===(r=window.wwofObj)||void 0===r?void 0:r.appUser)&&e.push(t(t({},o),{},{key:o.wholesale_role})),e}),[])}return null===(r=e.product)||void 0===r||null===(r=r.wholesale_data)||void 0===r||null===(r=r.wwpp_quantity_discount_rule_mapping)||void 0===r||null===(r=r.mapping)||void 0===r?void 0:r.reduce(((e,o)=>{var r;return(null==o?void 0:o.wholesale_role)===(null===(r=g())||void 0===r?void 0:r.appUser)&&e.push(t(t({},o),{},{key:o.wholesale_role})),e}),[])})),x=e=>{let t=""!==(null==e?void 0:e.start_qty)?e.start_qty:"";return""!==(null==e?void 0:e.end_qty)?t+=" - "+(null==e?void 0:e.end_qty):t+="+",t},C=t=>{var o,l;const n=j({symbol:"",precision:r.wwofObj.wcSettings.currency.numDecimals,decimalSeparator:r.wwofObj.wcSettings.currency.decimalSeparator}),a=null===(o=f(e.product).value)||void 0===o||null===(o=o.wholesale_data)||void 0===o||null===(o=o.wholesale_price)||void 0===o?void 0:o[null===(l=g())||void 0===l?void 0:l.appUser];let i;return i=null!=t&&t.wholesale_discount?t.wholesale_discount:"percent-price"===(null==t?void 0:t.price_type)?n.formatAmount(null==t?void 0:t.wholesale_price):n.formatAmount(100-Number(null==t?void 0:t.wholesale_price)/a*100),i+"%"};return(e,t)=>(i(),u(y(P),{columns:q,"data-source":k.value,"page-size":20,pagination:!1,class:m("quantity-based-pricing-table"+(y(T)?"-card":"")),"get-popup-container":y(O)},{bodyCell:c((({column:e,record:t})=>["discountTableQty"===e.dataIndex?(i(),d(s,{key:0},[p(v(x(t)),1)],64)):w("",!0),"discountTablePrice"===e.dataIndex?(i(),d("span",{key:1,innerHTML:y(h)(null==t?void 0:t.calculated_price)},null,8,o)):w("",!0),"discountTableSave"===e.dataIndex?(i(),d(s,{key:2},[p(v(C(t)),1)],64)):w("",!0)])),_:1},8,["data-source","class","get-popup-container"]))}}))}}}))}();
