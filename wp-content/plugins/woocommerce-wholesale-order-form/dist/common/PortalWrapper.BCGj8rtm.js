import{c as W,a0 as R,aA as m,aB as T,bb as E,d as D,P as I,R as L,s as f,ai as _,B as z,w as H,n as O,C as A,g as F}from"./LoadingOutlined.BFkAxzyV.js";import{P as M}from"./ExclamationCircleFilled.CrW3q_TN.js";import{w as P}from"./raf.Deuc0E8-.js";let w;function $(e){if(typeof document>"u")return 0;if(w===void 0){const i=document.createElement("div");i.style.width="100%",i.style.height="200px";const n=document.createElement("div"),t=n.style;t.position="absolute",t.top="0",t.left="0",t.pointerEvents="none",t.visibility="hidden",t.width="200px",t.height="150px",t.overflow="hidden",n.appendChild(i),document.body.appendChild(n);const a=i.offsetWidth;n.style.overflow="scroll";let l=i.offsetWidth;a===l&&(l=n.clientWidth),document.body.removeChild(n),w=a-l}return w}function U(e){const i=e.match(/^(.*)px$/),n=Number(i==null?void 0:i[1]);return Number.isNaN(n)?$():n}function X(e){if(typeof document>"u"||!e||!(e instanceof Element))return{width:0,height:0};const{width:i,height:n}=getComputedStyle(e,"::-webkit-scrollbar");return{width:U(i),height:U(n)}}const V="vc-util-locker-".concat(Date.now());let B=0;function j(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}function q(e){const i=W(()=>!!e&&!!e.value);B+=1;const n="".concat(V,"_").concat(B);R(t=>{if(m()){if(i.value){const a=$(),l=j();T("\nhtml body {\n  overflow-y: hidden;\n  ".concat(l?"width: calc(100% - ".concat(a,"px);"):"","\n}"),n)}else E(n);t(()=>{E(n)})}},{flush:"post"})}let d=0;const v=m(),x=e=>{if(!v)return null;if(e){if(typeof e=="string")return document.querySelectorAll(e)[0];if(typeof e=="function")return e();if(typeof e=="object"&&e instanceof window.HTMLElement)return e}return document.body},Y=D({compatConfig:{MODE:3},name:"PortalWrapper",inheritAttrs:!1,props:{wrapperClassName:String,forceRender:{type:Boolean,default:void 0},getContainer:I.any,visible:{type:Boolean,default:void 0},autoLock:L(),didUpdate:Function},setup(e,i){let{slots:n}=i;const t=f(),a=f(),l=f(),b=f(1),p=m()&&document.createElement("div"),C=()=>{var o,r;t.value===p&&((r=(o=t.value)===null||o===void 0?void 0:o.parentNode)===null||r===void 0||r.removeChild(t.value)),t.value=null};let s=null;const h=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)||t.value&&!t.value.parentNode?(s=x(e.getContainer),s?(s.appendChild(t.value),!0):!1):!0},S=()=>v?(t.value||(t.value=p,h(!0)),N(),t.value):null,N=()=>{const{wrapperClassName:o}=e;t.value&&o&&o!==t.value.className&&(t.value.className=o)};return _(()=>{N(),h()}),q(W(()=>e.autoLock&&e.visible&&m()&&(t.value===document.body||t.value===p))),z(()=>{let o=!1;H([()=>e.visible,()=>e.getContainer],(r,c)=>{let[y,u]=r,[k,g]=c;v&&(s=x(e.getContainer),s===document.body&&(y&&!k?d+=1:o&&(d-=1))),o&&(typeof u=="function"&&typeof g=="function"?u.toString()!==g.toString():u!==g)&&C(),o=!0},{immediate:!0,flush:"post"}),O(()=>{h()||(l.value=P(()=>{b.value+=1}))})}),A(()=>{const{visible:o}=e;v&&s===document.body&&(d=o&&d?d-1:d),C(),P.cancel(l.value)}),()=>{const{forceRender:o,visible:r}=e;let c=null;const y={getOpenCount:()=>d,getContainer:S};return b.value&&(o||r||a.value)&&(c=F(M,{getContainer:S,ref:a,didUpdate:e.didUpdate},{default:()=>{var u;return(u=n.default)===null||u===void 0?void 0:u.call(n,y)}})),c}}});export{Y as P,X as a,$ as g};
