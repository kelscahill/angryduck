import{d as R,i as V,c as $,G as W,o as s,f as i,u as t,N as q,K as z,L as G,k as K,aa as H}from"../../../../../common/LoadingOutlined.BFkAxzyV.js";import{T as J,V as Q,u as U,b as l,c as m,j as v,p as X,w as Y,W as Z}from"../../../../../common/index.Ith4SzXf.js";import{_ as ee}from"../../../../../common/LoadingSpinner.vue_vue_type_script_setup_true_lang.BM77UlPO.js";import{C as oe}from"../../../../../common/currency-context.C3AYz1z8.js";import"../../../../../common/_commonjsHelpers.BosuxZz1.js";import"../../../../../common/ExclamationCircleFilled.CrW3q_TN.js";import"../../../../../common/index.CjASPO7n.js";import"../../../../../common/initDefaultProps.0LfrQis0.js";const te=["innerHTML"],ue=R({__name:"CartSubtotal",props:{sectionName:{},rowId:{},columnId:{},fieldId:{}},setup(r){const n=V("$window"),o=J(r.sectionName,r.rowId,r.columnId,r.fieldId),L=$(()=>Q(r.sectionName,r.rowId,r.columnId,r.fieldId)),A=U(),{cartTotals:u,getCartItemsRequest:p,getCartItemsError:B}=W(A),M=$(()=>{var w,y,x,S,b,_,I,g,T,h,D,E,F,j,C,k,N,O;const e=u.value,c=oe({symbol:(w=e==null?void 0:e.currency_symbol)!=null?w:n.wwofObj.wcSettings.currency.symbol,precision:(y=e==null?void 0:e.currency_minor_unit)!=null?y:n.wwofObj.wcSettings.currency.numDecimals,symbolPosition:(x=e==null?void 0:e.currency_position)!=null?x:n.wwofObj.wcSettings.currency.position,decimalSeparator:(S=e==null?void 0:e.currency_decimal_separator)!=null?S:n.wwofObj.wcSettings.currency.decimalSeparator,thousandSeparator:(b=e==null?void 0:e.currency_thousand_separator)!=null?b:n.wwofObj.wcSettings.currency.thousandSeparator,priceFormat:(_=e==null?void 0:e.currencyPriceFormat)!=null?_:""}),d=((I=o==null?void 0:o.options)==null?void 0:I.preText)||"Subtotal: ",f=((g=o==null?void 0:o.options)==null?void 0:g.taxDisplay)||((D=(h=(T=l())==null?void 0:T.wwppSettings)==null?void 0:h.wholesaleTax)==null?void 0:D.cart)||((j=(F=(E=l())==null?void 0:E.wcSettings)==null?void 0:F.taxDisplayMode)==null?void 0:j.cart)||"excl";let a=((C=o==null?void 0:o.options)==null?void 0:C.subtotalSuffix)||((N=(k=l())==null?void 0:k.wcSettings)==null?void 0:N.priceDisplaySuffix)||"";(O=o==null?void 0:o.options)!=null&&O.subtotalSuffix&&(o.options.subtotalSuffix.includes("{price_including_tax}")?a="<small>"+a.replace("{price_including_tax}",c.formatAmount(parseInt(e.total_price)/10**e.currency_minor_unit))+"</small>":o.options.subtotalSuffix.includes("{price_excluding_tax}")?a="<small>"+a.replace("{price_excluding_tax}",c.formatAmount(parseInt(e.total_items)/10**e.currency_minor_unit))+"</small>":a="<small>"+o.options.subtotalSuffix+"</small>");const P=a||(f==="incl"?"<smal>"+m("inclTax",wp.i18n.__("(incl. tax)","woocommerce-wholesale-order-form"))+"</small>":"<smal>"+m("exclTax",wp.i18n.__("(excl. tax)","woocommerce-wholesale-order-form"))+"</smal>");return wp.i18n.sprintf(wp.i18n._x("%1$s%2$s %3$s","Price amount excluding tax","woocommerce-wholesale-order-form"),d?'<span class="subtotal-pretext">'.concat(d,"</span>"):"",c.formatAmount(parseInt(f==="incl"?e.total_price:e.total_items,10)/10**e.currency_minor_unit),P)});return(e,c)=>(s(),i("div",{class:"cart-subtotal-box",style:H(t(Z)(e.sectionName,e.rowId,e.columnId,e.fieldId))},[t(p)===t(v).IDLE&&t(B)==null&&t(u)==null?(s(),i(q,{key:0},[z(G(t(m)("emptyCart",t(wp.i18n.__)("Empty Cart","woocommerce-wholesale-order-form"))),1)],64)):t(p)!==t(v).IDLE?(s(),K(ee,{key:1})):(s(),i("div",{key:2,style:H(L.value),innerHTML:t(X)(t(Y)("wwof_cart_subtotal",M.value,e.sectionName,e.rowId,e.columnId,e.fieldId))},null,12,te))],4))}});export{ue as default};
