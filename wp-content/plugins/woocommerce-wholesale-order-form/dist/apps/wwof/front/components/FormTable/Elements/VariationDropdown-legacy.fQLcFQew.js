!function(){function o(o,t){var e=Object.keys(o);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(o);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),e.push.apply(e,l)}return e}function t(t){for(var l=1;l<arguments.length;l++){var n=null!=arguments[l]?arguments[l]:{};l%2?o(Object(n),!0).forEach((function(o){e(t,o,n[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))}))}return t}function e(o,t,e){return(t=function(o){var t=function(o,t){if("object"!=typeof o||!o)return o;var e=o[Symbol.toPrimitive];if(void 0!==e){var l=e.call(o,t||"default");if("object"!=typeof l)return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(o)}(o,"string");return"symbol"==typeof t?t:t+""}(t))in o?Object.defineProperty(o,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):o[t]=e,o}System.register(["../../../../../../common/LoadingOutlined-legacy.CPhLaklC.js","../../../../../../common/index-legacy.BXaB4RSa.js","../../../../../../common/LoadingSpinner.vue_vue_type_script_setup_true_lang-legacy.DUjpgbC2.js","../../../../../../common/index-legacy.DJlMOCyj.js","../../../../../../common/_plugin-vue_export-helper-legacy.DgAO6S8O.js","../../../../../../common/_commonjsHelpers-legacy.DUdKTVN3.js","../../../../../../common/ExclamationCircleFilled-legacy.pk-fzLqd.js","../../../../../../common/index-legacy.6YzH0Q6d.js","../../../../../../common/initDefaultProps-legacy.Dg02spAx.js","../../../../../../common/motion-legacy.Bqa37s8Y.js","../../../../../../common/raf-legacy.BuqC4Cal.js","../../../../../../common/vnode-legacy.D_pD5Ypg.js","../../../../../../common/isVisible-legacy.DY5sQV1e.js","../../../../../../common/ResizeObserver.es-legacy.0iJwNYH9.js","../../../../../../common/_getTag-legacy.C5XgQwbj.js","../../../../../../common/PortalWrapper-legacy.DAyoZhpc.js","../../../../../../common/KeyCode-legacy.CYgXvjDm.js","../../../../../../common/BaseInput-legacy.Cv2S-5JS.js","../../../../../../common/pickAttrs-legacy.D7W1GfS4.js","../../../../../../common/slide-legacy.B70IHwQ7.js","../../../../../../common/isMobile-legacy.u4Sbg_0V.js","../../../../../../common/omit-legacy.BQBjzFAf.js","../../../../../../common/useMergedState-legacy.DcZ24Ay_.js","../../../../../../common/useState-legacy.Cz9hM3Y9.js","../../../../../../common/DownOutlined-legacy.aSxLjf1f.js","../../../../../../common/SearchOutlined-legacy.BXpp2u4b.js","../../../../../../common/FormItemContext-legacy.Bn2BifA3.js","../../../../../../common/createContext-legacy.BN14iAW9.js","../../../../../../common/statusUtils-legacy.B_kTqdc-.js","../../../../../../common/Compact-legacy.DDJsKFLh.js","../../../../../../common/move-legacy.DLrpAbGJ.js","../../../../../../common/compact-item-legacy.DIFhuQPK.js"],(function(o,e){"use strict";var l,n,a,i,r,u,d,c,s,v,p,m,f,w,b,y,g,h,j,_,O,k,P,S,C,E,I,x,$;return{setters:[o=>{l=o.d,n=o.G,a=o.b,i=o.c,r=o.B,u=o.u,d=o.o,c=o.f,s=o.k,v=o.l,p=o.N,m=o.a8,f=o.O,w=o.K,b=o.L,y=o.g,g=o.J,h=o.M},o=>{j=o.u,_=o.k,O=o._,k=o.j,P=o.w,S=o.Y,C=o.c,E=o.v},o=>{I=o._},o=>{x=o.S},o=>{$=o._},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var e=document.createElement("style");e.textContent=".ant-select-dropdown.card-format{min-width:160px!important;max-width:160px!important}.wwof-product-attribute-label[data-v-6893f35b]{display:block}.variation-dropdown-select-control[data-v-6893f35b]{max-width:17.5rem}.wwof-product-attribute-select-standard[data-v-6893f35b]{min-width:7rem}[data-v-6893f35b] .ant-select .ant-select-selector{align-items:center}\n/*$vite$:1*/",document.head.appendChild(e);o("default",$(l({__name:"VariationDropdown",props:{product:{},columnId:{},variationStyle:{}},setup(o){var e;const l=j(),{emit:$}=_(`wwofSelectedVariation${o.product.id}`),D=x.Option,{isCardFormat:V,productVariations:N,variationsSelected:A,standardSelected:B}=n(l),L=a(null),q=t(t({},o.product.attributes.reduce(((o,e)=>{var l;return o=t(t({},o),{},{[e.name]:(null==e||null===(l=e.options)||void 0===l?void 0:l[0])||(null==e?void 0:e.option)||""})}),{})),o.product.default_attributes.reduce(((o,e)=>o=t(t({},o),{},{[e.name]:e.option})),{})),F=i((()=>{if(o.variationStyle)return o.variationStyle;if(o.columnId){const t=O(o.columnId,"variationStyle");if(t)return t}return"combo"})),H=i((()=>!!o.columnId&&"yes"===O(o.columnId,"hideComboVariationNamePrefix"))),J=(e,n=!1)=>{var a,i,r;if(!e){var u,d;if(!window.lodash.isEmpty(q))e=null===(u=N.value)||void 0===u||null===(u=u[o.product.id])||void 0===u||null===(u=u.data)||void 0===u?void 0:u.find((o=>{var e;return"yes"!==(null===(e=l.formPost)||void 0===e||null===(e=e.settings)||void 0===e?void 0:e.showZeroInventory)&&"outofstock"===o.stock_status?null:window.lodash.isEqual(o.attributes.reduce(((o,e)=>o=t(t({},o),{},{[e.name]:e.option})),{}),q)}));if(window.lodash.isEmpty(e))e=null===(d=N.value)||void 0===d||null===(d=d[o.product.id])||void 0===d||null===(d=d.data)||void 0===d?void 0:d.find((o=>"outofstock"!==o.stock_status||!0))}(A.value=E(A.value,{$merge:{[o.product.id]:(null===(a=e)||void 0===a?void 0:a.id)||null}}),n)||(B.value=t(t({},B.value),{},{[o.product.id]:(null===(i=e)||void 0===i||null===(i=i.attributes)||void 0===i?void 0:i.length)>0&&(null===(r=e)||void 0===r?void 0:r.attributes.reduce(((o,e)=>o=t(t({},o),{},{[e.name]:e.option?e.option:q[e.name]})),{}))}));$(e)};"variable"===o.product.type&&null==(null===(e=A.value)||void 0===e?void 0:e[o.product.id])&&J();const M=a(k.IDLE);r((()=>{var t;(null===(t=o.product.variations)||void 0===t?void 0:t.length)>0&&l.getProductVariations(o.product.id,1,M).then((()=>{var t;null==(null===(t=A.value)||void 0===t?void 0:t[o.product.id])&&J()}))}));const G=i((()=>{var e;const n=(null===(e=N.value)||void 0===e||null===(e=e[o.product.id])||void 0===e?void 0:e.data)||[];return P("wwof_variation_dropdown_options",n.reduce(((o,e)=>{var n;if("yes"!==(null===(n=l.formPost)||void 0===n||null===(n=n.settings)||void 0===n?void 0:n.showZeroInventory)&&"outofstock"===e.stock_status)return o;const a=e.attributes.filter((o=>""===o.option));return window.lodash.isEmpty(a)||(e=t(t({},e),{},{attributesWithAnyOptions:!0})),o.push(e),o}),[]),o.product,o.columnId,o.variationStyle)})),K=t=>{var e;if(null==(null==N||null===(e=N.value)||void 0===e?void 0:e[o.product.id]))return;if(M.value!==k.IDLE)return;const n=t.target;if(n.scrollTop+n.offsetHeight===n.scrollHeight){const t=N.value[o.product.id].currentPage+1;if(t>N.value[o.product.id].totalPages)return;l.getProductVariations(o.product.id,t,M)}},T=o=>{const t=G.value.find((t=>t.id===o));J(t)},W=t=>{var e,l,n,a,i,r,u;const d=null==q?void 0:q[t.name];let c=null!==(e=null==t||null===(l=t.options)||void 0===l?void 0:l.findIndex((o=>o===d)))&&void 0!==e?e:null==t||null===(n=t.options)||void 0===n?void 0:n[0];return-1===c&&(c=0),null!==(a=B.value)&&void 0!==a&&null!==(a=a[o.product.id])&&void 0!==a&&a[t.name]?null===(i=B.value)||void 0===i||null===(i=i[o.product.id])||void 0===i?void 0:i[t.name]:null!==(r=null==t||null===(u=t.options)||void 0===u?void 0:u[c])&&void 0!==r?r:""},z=a([]),Z=()=>(o=>window.lodash.sortBy(o,"position"))(window.lodash.isEmpty(o.product.attributes)?[]:[...o.product.attributes.filter((o=>o.variation))]);z.value=Z();const R=(e,l)=>{var n;l?(L.value=e,Object.values(Object.fromEntries(Object.entries((null===(n=B.value)||void 0===n?void 0:n[o.product.id])||{}).filter((([o,t])=>o&&""!==t)))).filter(Boolean).length<1?z.value=Z():(()=>{var e,l;const n=Object.fromEntries(Object.entries((null===(e=B.value)||void 0===e?void 0:e[o.product.id])||{}).filter((([o,t])=>o!==L.value&&""!==t))),a=Object.keys(n).length,i=(null===(l=N.value)||void 0===l?void 0:l[o.product.id].data.filter((o=>{const t=window.lodash.keyBy(o.attributes,"name");let e=0;return Object.keys(n).forEach((o=>{var l,a;(null===(l=t[o])||void 0===l?void 0:l.option)!==n[o]&&""!==(null===(a=t[o])||void 0===a?void 0:a.option)&&null!=(null==t?void 0:t[o])||++e})),e===a}))).reduce(((o,e)=>(Z().forEach((l=>{var n;const a=o.findIndex((o=>o.name===l.name)),i=null===(n=e.attributes.find((o=>o.name===l.name)))||void 0===n?void 0:n.option;-1===a?o=[...o,t(t({},l),{},{options:[i]})]:o[a].options.includes(i)||(o[a].options=[...o[a].options,i])})),o)),[]);for(const o of i){var r,u;o.options.includes("")&&(o.options=[...null!==(r=null===(u=Z().find((t=>t.name===o.name)))||void 0===u?void 0:u.options)&&void 0!==r?r:[]])}z.value=i})()):L.value=null},U=i((()=>G.value.some((o=>o.attributesWithAnyOptions))));return(e,l)=>{var n;return null!=(null===(n=u(N))||void 0===n||null===(n=n[e.product.id])||void 0===n?void 0:n.total)&&u(N)[e.product.id].total>0?(d(),c("div",{key:0,class:f(`variation-dropdown-select-box ${F.value}`)},["combo"!==F.value||U.value?g("",!0):(d(),s(u(x),{key:0,class:"variation-dropdown-select-control wwof-product-attribute-select-combo","dropdown-class-name":u(V)?"card-format":"",value:u(A)[e.product.id],"allow-clear":null!=G.value.find((o=>""===(null==o?void 0:o.id))),"get-popup-container":u(S),onPopupScroll:K,onChange:T},{default:v((()=>[(d(!0),c(p,null,m(G.value,((o,t)=>(d(),s(u(D),{key:`${e.product.id}-${o.id}`,value:o.id,class:f(`combo-variation ${u(window.lodash.kebabCase)(o.attribute_summary)}`)},{default:v((()=>[H.value?(d(),c(p,{key:0},[w(b(u(P)("wwof_variation_dropdown_option_label",`${o.attribute_summary}`,o,e.product,e.columnId)),1)],64)):(d(),c(p,{key:1},[w(b(u(P)("wwof_variation_dropdown_option_label",`(${t+1}/${G.value.length}) ${o.attribute_summary}`,o,e.product,e.columnId)),1)],64))])),_:2},1032,["value","class"])))),128)),M.value===u(k).PENDING?(d(),s(u(D),{key:0,class:"combo-variation loading"},{default:v((()=>[y(I)])),_:1})):g("",!0)])),_:1},8,["dropdown-class-name","value","allow-clear","get-popup-container"])),"standard"===F.value||U.value?(d(!0),c(p,{key:1},m(z.value,(l=>{var n,a;return d(),c("p",{key:`product-${e.product.id}-attribute-${l.id}-${null!==(n=null===(a=u(B))||void 0===a||null===(a=a[e.product.id])||void 0===a?void 0:a[l.name])&&void 0!==n?n:"none"}`},[h("label",{class:f(`wwof-product-attribute-label wwof-product-attribute-label-${u(window.lodash.kebabCase)(l.name)}`)},b(l.name),3),y(u(x),{"allow-clear":"",value:W(l),class:f(`wwof-product-attribute-select wwof-product-attribute-select-standard wwof-product-attribute-select-${u(window.lodash.kebabCase)(l.name)}`),"dropdown-class-name":u(V)?"card-format":"","get-popup-container":u(S),placeholder:u(wp.i18n.sprintf)(u(C)("selectAttribute",u(wp.i18n.__)("Select %s","woocommerce-wholesale-order-form")),l.name),options:[{value:"",label:u(C)("chooseAnOption",u(wp.i18n.__)("Choose an option","woocommerce-wholesale-order-form")),class:"wwof-tw-text-gray-400 standard-variation"},...l.options.map((o=>({value:o,label:o,class:`standard-variation ${u(window.lodash.kebabCase)(o)}`})))],onChange:e=>((e,l)=>{var n,a;B.value=t(t({},B.value),{},{[o.product.id]:t(t({},(null===(n=B.value)||void 0===n?void 0:n[o.product.id])||{}),{},{[e]:null!=l?l:""})});const i=null===(a=N.value)||void 0===a||null===(a=a[o.product.id])||void 0===a||null===(a=a.data)||void 0===a?void 0:a.find((e=>{var l;const n=e.attributes.reduce(((o,e)=>t(t({},o),{},{[e.name]:e.option})),{}),a=JSON.parse(JSON.stringify(null===(l=B.value)||void 0===l?void 0:l[o.product.id])),i=Object.keys(n).filter((o=>""===n[o]));return i.length>0?window.lodash.isEqual(window.lodash.omit(a,i),window.lodash.omit(n,i)):window.lodash.isEqual(a,n)}));J(i,!0)})(l.name,e),onDropdownVisibleChange:o=>R(l.name,o)},null,8,["value","class","dropdown-class-name","get-popup-container","placeholder","options","onChange","onDropdownVisibleChange"])])})),128)):g("",!0)],2)):g("",!0)}}}),[["__scopeId","data-v-6893f35b"]]))}}}))}();
