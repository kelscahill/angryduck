System.register(["../../../../../../common/LoadingOutlined-legacy.CPhLaklC.js","../../../../../../common/index-legacy.BXaB4RSa.js","../../../../../../common/_plugin-vue_export-helper-legacy.DgAO6S8O.js","../../../../../../common/_commonjsHelpers-legacy.DUdKTVN3.js","../../../../../../common/ExclamationCircleFilled-legacy.pk-fzLqd.js"],(function(o,d){"use strict";var a,t,n,e,l,i,u,r,c,p,s,v,w,m,f,y,_;return{setters:[o=>{a=o.d,t=o.i,n=o.G,e=o.b,l=o.c,i=o.B,u=o.u,r=o.o,c=o.f,p=o.M,s=o.O,v=o.J},o=>{w=o.u,m=o.k,f=o._,y=o.v},o=>{_=o._},null,null],execute:function(){var d=document.createElement("style");d.textContent=".wwof-addons-container[data-v-d6117877]{padding-top:1em}[data-v-d6117877] .wc-pao-addons-container .wc-pao-addon-container{padding-bottom:6px}[data-v-d6117877] .wc-pao-addons-container .wc-pao-addon .wc-pao-addon-wrap label{display:inline}form[data-v-d6117877]:not(.wwof-addons-on-modal) .wwof-addons.hide-product-addons-totals #product-addons-total{display:none}\n/*$vite$:1*/",document.head.appendChild(d);const g=["data-product_id","data-product_variations"],h=["innerHTML"],$={class:"quantity"},j=["value"],b=a({__name:"ProductAddons",props:{product:{},columnId:{},modelValue:{type:Boolean,default:!1}},setup(o){var d;const a=t("$window"),_=w(),{variationsSelected:b,quantities:x,productAddonsForm:V,addToCartFormData:Q}=n(_),{on:T}=m(`wwofSelectedVariation${o.product.id}`),{on:E}=m(`wwofCurrentProductQuantity${o.product.id}`),C=e({}),F=null!==(d=o.product.wwof_product_addons)&&void 0!==d?d:[],A=l((()=>"yes"!==f(o.columnId,"displayProductAddonTotals")));i((()=>{!o.product.wwof_product_addons&&window.lodash.isEmpty(o.product.wwof_product_addons)||(k(),I())}));const k=()=>{window.jQuery((function(){const d=o.modelValue?window.jQuery("body").find(".ant-modal form.cart.wwof-addons-container:not(.cart_group)"):window.jQuery("body").find("#product-name-"+o.product.id+".wwof-table-field.product-name form.cart.wwof-addons-container:not(.cart_group)"),t=a.WC_PAO.Form(d),n=new FormData;!0!==o.modelValue?V.value=y(V.value,{$merge:{[o.product.id]:t||null}}):C.value=t,Q.value=y(Q.value,{$merge:{[o.product.id]:n}}),"variable"===o.product.type&&O()}))},I=()=>{window.jQuery((function(){let d={};var a;d=!0!==o.modelValue?null===(a=V.value)||void 0===a?void 0:a[o.product.id].$el:C.value.$el,d.on("blur change",".wc-pao-addon input, .wc-pao-addon textarea, .wc-pao-addon select, .wc-pao-addon-custom-text",(function(){var a,t;const n=null!==(a=null===(t=Q.value)||void 0===t?void 0:t[o.product.id])&&void 0!==a?a:new FormData;d.find("input, textarea, select").each(((o,d)=>{const a=window.jQuery(d);if(void 0===a)return;let t=a.attr("name"),e=a.val(),l=a.attr("type"),i=a.closest(".wc-pao-addon");if(n.delete(t),void 0!==t&&void 0!==e&&""!==e)if("file"===l){if(e=a.get(0).files[0],void 0===e)return;n.append(t,e)}else"checkbox"===l||"radio"===l?i.find("input").each(((o,d)=>{const a=window.jQuery(d);!0===a.is(":checked")&&n.append(t,a.val())})):n.append(t,e)})),Q.value=y(Q.value,{$merge:{[o.product.id]:n}})}))}))},O=()=>{var d,a;if(!o.product.wwof_product_addons&&window.lodash.isEmpty(o.product.wwof_product_addons))return;const t=null===(d=b.value)||void 0===d?void 0:d[o.product.id],n=(null===(a=V.value)||void 0===a?void 0:a[o.product.id].$el.data("product_variations"))||[];if(window.lodash.isEmpty(n)||!t)return;const e=n.findIndex((o=>(null==o?void 0:o.variation_id)===t));null!==e&&window.jQuery((function(){var d,a,t,l,i,u;!0!==o.modelValue?(null===(d=V.value)||void 0===d||d[o.product.id].totals.updateVariation(n[e]),null===(a=V.value)||void 0===a||a[o.product.id].validation.validate(),null===(t=V.value)||void 0===t||t[o.product.id].updateTotals()):(null===(l=C.value)||void 0===l||l.totals.updateVariation(n[e]),null===(i=C.value)||void 0===i||i.validation.validate(),null===(u=C.value)||void 0===u||u.updateTotals())}))},P=l((()=>"variable"===o.product.type?JSON.stringify(o.product.wwof_product_addons.variations_data):null)),S=l((()=>{const d=o.modelValue?"wwof-addons-on-modal":"";return"variable"===o.product.type?`variations_form cart wwof-addons-container ${d}`:`cart wwof-addons-container ${d}`}));return T((d=>{!d&&window.lodash.isEmpty(o.product.wwof_product_addons)||O()})),E((()=>{!o.product.wwof_product_addons&&window.lodash.isEmpty(o.product.wwof_product_addons)||window.jQuery((function(){var d,a,t,n;!0!==o.modelValue?(null===(d=V.value)||void 0===d||d[o.product.id].validation.validate(),null===(a=V.value)||void 0===a||a[o.product.id].updateTotals()):(null===(t=C.value)||void 0===t||t.validation.validate(),null===(n=C.value)||void 0===n||n.updateTotals())}))})),(o,d)=>{var a;return 0!==u(F).length?(r(),c("form",{key:0,class:s(S.value),"data-product_id":`${o.product.id}`,"data-product_variations":`${P.value}`,method:"post",enctype:"multipart/form-data"},[p("div",{class:s(A.value?"wwof-addons hide-product-addons-totals":"wwof-addons"),innerHTML:u(F).html},null,10,h),p("div",$,[p("input",{class:"qty",type:"hidden",value:null===(a=u(x))||void 0===a?void 0:a[o.product.id]},null,8,j)])],10,g)):v("",!0)}}});o("default",_(b,[["__scopeId","data-v-d6117877"]]))}}}));
