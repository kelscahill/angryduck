!function(){function e(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);o&&(n=n.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),t.push.apply(t,n)}return t}function o(o){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach((function(e){t(o,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(r,e))}))}return o}function t(e,o,t){return(o=function(e){var o=function(e,o){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,o||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(e)}(e,"string");return"symbol"==typeof o?o:o+""}(o))in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}System.register(["../../../../../../common/LoadingOutlined-legacy.CPhLaklC.js","../../../../../../common/index-legacy.BXaB4RSa.js","../../../../../../common/LoadingSpinner.vue_vue_type_script_setup_true_lang-legacy.DUjpgbC2.js","../../../../../../common/index-legacy.CiX7hMjz.js","../../../../../../common/index-legacy.BwKQFx3_.js","../../../../../../common/index-legacy.BdsBHs-a.js","../../../../../../common/_plugin-vue_export-helper-legacy.DgAO6S8O.js","../../../../../../common/_commonjsHelpers-legacy.DUdKTVN3.js","../../../../../../common/ExclamationCircleFilled-legacy.pk-fzLqd.js","../../../../../../common/index-legacy.6YzH0Q6d.js","../../../../../../common/initDefaultProps-legacy.Dg02spAx.js","../../../../../../common/omit-legacy.BQBjzFAf.js","../../../../../../common/index-legacy.BO0QmMSA.js","../../../../../../common/isVisible-legacy.DY5sQV1e.js","../../../../../../common/useState-legacy.Cz9hM3Y9.js","../../../../../../common/raf-legacy.BuqC4Cal.js","../../../../../../common/devWarning-legacy.BL7D_mCx.js","../../../../../../common/warning-legacy.BV4CRm2j.js","../../../../../../common/compact-item-legacy.DIFhuQPK.js","../../../../../../common/createContext-legacy.BN14iAW9.js","../../../../../../common/Compact-legacy.DDJsKFLh.js","../../../../../../common/_getTag-legacy.C5XgQwbj.js","../../../../../../common/useFlexGapSupport-legacy.GR596bXG.js","../../../../../../common/styleChecker-legacy.Cnshc1nm.js"],(function(e,t){"use strict";var n,r,l,a,c,i,u,d,s,m,v,p,y,f,g,b,j,w,_,C,h,O,x,T,k,P,S,E,I,F,A,D,N,q;return{setters:[e=>{n=e.d,r=e.G,l=e.c,a=e.b,c=e.o,i=e.f,u=e.u,d=e.k,s=e.l,m=e.g,v=e.S,p=e.N,y=e.K,f=e.L,g=e.J,b=e.aa,j=e.h},e=>{w=e.u,_=e._,C=e.c,h=e.$,O=e.j,x=e.X,T=e.b,k=e.d,P=e.B,S=e.Y,E=e.Z},e=>{I=e._},e=>{F=e.S,A=e.a},e=>{D=e.B},e=>{N=e.S},e=>{q=e._},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var t=document.createElement("style");t.textContent=".variation-dropdown-select-box[data-v-478391d1]{margin-top:1rem}[data-v-478391d1] .add-to-cart-btn,[data-v-478391d1] .add-to-cart-btn:hover{color:var(--wwof-button-text-color);background-color:var(--wwof-button-color);border-color:var(--wwof-button-color)}\n/*$vite$:1*/",document.head.appendChild(t);const L=["id"];e("default",q(n({__name:"AddToCartButton",props:{product:{},columnId:{}},setup(e){const t=k("components/FormTable/Elements/VariationDropdown.vue"),n=k("components/FormTable/Extras/AddToCartSuccess.vue"),q=k("components/FormTable/Extras/LoginToSeePrices.vue"),B=k("components/FormTable/Extras/SimplifyViewCart.vue"),G=w(),{addItemToCartRequest:R,quantities:V,standardSelected:$,isCardFormat:z}=r(G),H=l((()=>{const o=_(e.columnId,"buttonText");return o||C("addToCart",wp.i18n.__("Add To Cart","woocommerce-wholesale-order-form"))})),J=l((()=>{var o;return null!==(o=h(e.columnId,"buttonTextColor"))&&void 0!==o?o:"#FFF"})),K=l((()=>{var o;return null!==(o=h(e.columnId,"buttonColor"))&&void 0!==o?o:"#40A9FF"})),U=l((()=>"yes"===_(e.columnId,"displayVariationDropdown"))),W=a(!1),X=l((()=>R.value===O.PENDING)),Y=a(!1),Z=l((()=>{var e;return Y.value&&"no"!==(null===(e=G.formPost)||void 0===e||null===(e=e.settings)||void 0===e?void 0:e.simplifyAddToCartNotices)})),M=()=>{var t,r,l;const a=null!==(t=_(e.columnId,"notificationDuration"))&&void 0!==t?t:10;W.value=!0;const c=null!==(r=null===(l=V.value)||void 0===l?void 0:l[e.product.id])&&void 0!==r?r:1;Y.value=!1;let i={id:e.product.id,quantity:c};if("variable"===e.product.type){const t=x(e.product).value,n=t.attributes.some((e=>""===e.option));i=o(o({},i),{},n?{variation:Object.keys($.value[e.product.id]).map((o=>({attribute:o,value:$.value[e.product.id][o]})))}:{id:t.id,parent_id:e.product.id})}G.addItemToCart(i).then((t=>{var r,l;W.value=!1;let i=[o(o({},x(e.product).value),{},{quantity:c})];var u;if("no"!==_(e.columnId,"showAddToCartNotification")&&null!=(null==t||null===(r=t.data)||void 0===r?void 0:r.items)&&(null==t||null===(l=t.data)||void 0===l?void 0:l.items.length)>0)"no"===(null===(u=G.formPost)||void 0===u||null===(u=u.settings)||void 0===u?void 0:u.simplifyAddToCartNotices)?P.success({message:C("successfullyAdded",wp.i18n.__("Successfully added:","woocommerce-wholesale-order-form")),description:j(n,{products:i,itemsOnCart:t.data.items}),duration:a,getContainer:S}):Y.value=!0;else if(null!=(null==t?void 0:t.error)){var d;P.error({message:C("errorCaps",wp.i18n.__("ERROR:","woocommerce-wholesale-order-form")),description:wp.htmlEntities.decodeEntities(null===(d=t.error)||void 0===d?void 0:d.message),duration:a,getContainer:S})}document.body.dispatchEvent(new Event("wc_fragment_refresh")),E("wwof_add_to_cart_request_response",t,e.product,c)}))},Q=l((()=>"outofstock"!==x(e.product).value.stock_status));return(e,o)=>{var n,r;return c(),i("div",{id:`add-to-cart-button-${e.product.id}`,class:"add-to-cart-btn-box",style:b({"--wwof-button-text-color":J.value,"--wwof-button-color":K.value})},[null==(null===(n=u(T)())||void 0===n?void 0:n.appUser)&&"yes"===(null===(r=u(T)())||void 0===r||null===(r=r.wwpSettings)||void 0===r?void 0:r.hidePriceAddToCart)?(c(),d(v,{key:0},{fallback:s((()=>[m(u(F),{active:"",paragraph:!1,title:!1})])),default:s((()=>[m(u(q))])),_:1})):(c(),i(p,{key:1},[m(u(N),{direction:u(z)?"vertical":"horizontal"},{default:s((()=>[m(u(D),{size:"large",type:"primary",class:"add-to-cart-btn",disabled:!Q.value||W.value&&X.value,onClick:M},{default:s((()=>[W.value&&X.value?(c(),d(I,{key:0})):(c(),i(p,{key:1},[y(f(H.value),1)],64))])),_:1},8,["disabled"]),Z.value?(c(),d(v,{key:0},{fallback:s((()=>[m(u(A),{active:""})])),default:s((()=>[m(u(B),{"column-id":e.columnId},null,8,["column-id"])])),_:1})):g("",!0)])),_:1},8,["direction"]),U.value?(c(),d(v,{key:0},{fallback:s((()=>[m(u(F),{active:"",paragraph:!1,title:!1})])),default:s((()=>[m(u(t),{product:e.product,"column-id":e.columnId},null,8,["product","column-id"])])),_:1})):g("",!0)],64))],12,L)}}}),[["__scopeId","data-v-478391d1"]]))}}}))}();
