import{d as y,G as E,b as x,a9 as O,c as T,o as d,k as u,ab as B,l as a,M as n,L as $,u as e,f as V,O as f,g as r,J as N}from"../../../../../../../common/LoadingOutlined.BFkAxzyV.js";import{D as R}from"../../../../../../../common/vuedraggable.umd.kDerP-51.js";import{h as F,c as m,t as M,S as w,E as P,v as Y,x as j}from"../../../../../../../common/index.Ith4SzXf.js";import{_ as H}from"../../../../../../../common/HiddenFormInput.vue_vue_type_script_setup_true_lang.CzayNTE-.js";import J from"../../../../../front/components/FormTable/TableColumnHeader.BF2X7vN3.js";import{S as z}from"../../../../../../../common/index.C08f97vy.js";import{S as A}from"../../../../../../../common/SettingOutlined.BlAlQy5X.js";import{D as G}from"../../../../../../../common/DragOutlined.DArnxku8.js";import{P as I}from"../../../../../../../common/index.DqmYKZtO.js";import{D as L}from"../../../../../../../common/DeleteOutlined.DS1yXUts.js";import{T as c}from"../../../../../../../common/index.BVxneXNm.js";import{_ as U}from"../../../../../../../common/_plugin-vue_export-helper.DlAUqK2U.js";import"../../../../../../../common/_commonjsHelpers.BosuxZz1.js";import"../../../../../../../common/ExclamationCircleFilled.CrW3q_TN.js";import"../../../../../../../common/index.K13Y4VJm.js";import"../../../../../../../common/motion.WGHlFb5s.js";import"../../../../../../../common/raf.Deuc0E8-.js";import"../../../../../../../common/vnode.BC_D2aP8.js";import"../../../../../../../common/isVisible.BHYmLg1T.js";import"../../../../../../../common/ResizeObserver.es.B1PUzC5B.js";import"../../../../../../../common/_getTag.CiIQqq4n.js";import"../../../../../../../common/PortalWrapper.BCGj8rtm.js";import"../../../../../../../common/isPlainObject.DIpfZ0jz.js";import"../../../../../../../common/Col.C48UZKBg.js";import"../../../../../../../common/responsiveObserve.BxgVt-aQ.js";import"../../../../../../../common/useFlexGapSupport.BqBlA3Mn.js";import"../../../../../../../common/styleChecker.BhhSW-4N.js";import"../../../../../../../common/warning.CrM1WiW4.js";import"../../../../../../../common/debounce.C88Ko_T_.js";import"../../../../../../../common/_arrayIncludes.B8uzE354.js";import"../../../../../../../common/QuestionCircleOutlined.DbypaJli.js";import"../../../../../../../common/collapseMotion.CnwYBKtm.js";import"../../../../../../../common/FormItemContext.CuFDkfIX.js";import"../../../../../../../common/createContext.DiHI9yzd.js";import"../../../../../../../common/initDefaultProps.0LfrQis0.js";import"../../../../../../../common/index.lxr2aJRu.js";import"../../../../../../../common/statusUtils.DES_qYlM.js";import"../../../../../../../common/omit.DTkbSo29.js";import"../../../../../../../common/BaseInput.C6Ke7hb1.js";import"../../../../../../../common/Compact.bO-KmQeW.js";import"../../../../../../../common/index.CUGsZk5V.js";import"../../../../../../../common/compact-item.Be3L5ggo.js";import"../../../../../../../common/SearchOutlined.K2PZqdQC.js";import"../../../../../../../common/index.Bdw1ik1L.js";import"../../../../../../../common/index.DjkvlaSA.js";import"../../../../../../../common/useState.L1hofs5h.js";import"../../../../../../../common/devWarning.BVoSASTV.js";import"../../../../../../../common/table-elements.Bs0D33WK.js";import"../../../../../../../common/DownloadOutlined.D7JVmMHp.js";import"../../../../../../../common/ShoppingCartOutlined.B2D8qpCU.js";import"../../../../../../../common/index.RfEH1ihW.js";import"../../../../../../../common/Checkbox.CYa6__iO.js";import"../../../../../../../common/index.BYshCuJZ.js";import"../../../../../../../common/CaretUpOutlined.BBnMPvd9.js";import"../../../../../../../common/index.B2U_dx8i.js";import"../../../../../../../common/colors.Do-YmLJ0.js";import"../../../../../../../common/useMergedState.DXdtLiCT.js";import"../../../../../../../common/KeyCode.B_gOgbN6.js";import"../../../../../../../common/ActionButton.CECSKzhY.js";import"../../../../../../../common/useDestroyed.puOwgd-l.js";import"../../../../../../../common/firstNotUndefined.CLFzEa0p.js";const q={class:"ant-table-cell"},K={class:"empty-columns-description"},Q=["id"],W=["id"],X=y({__name:"DraggableTableColumns",setup(Z){const g=F(),{draggingTableElement:_,formPost:b,settingsDrawer:v,settingsDrawerData:C}=E(g),p=x(!1),l=O(b.value.form_body,"columns"),D=T(()=>["wwof-table-fields-draggable",(_.value||p.value)&&"wwof-tw-bg-amber-100"].filter(Boolean).join(" ")),h=i=>{l.value=Y(l.value,{$splice:[[l.value.findIndex(t=>t.id===i),1]]}),j()},S=(i,t)=>["ant-table-cell wwof-table-field",i.elementClass,v.value===w.FORM_BODY&&C.value.columnIndex===t?"!wwof-tw-bg-sky-100":!1].filter(Boolean).join(" ");return(i,t)=>(d(),u(e(R),{modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=o=>l.value=o),group:"table-elements","item-key":"id","ghost-class":"wwof-dragging-table-field",class:f(D.value),handle:".dnd-handle-table-field",tag:"tr",onStart:t[1]||(t[1]=o=>p.value=!0),onEnd:t[2]||(t[2]=o=>p.value=!1)},B({item:a(({element:o,index:s})=>[(d(),V("th",{id:"wwof-table-field-".concat(o.id),key:o.id,class:f(S(o,s))},[r(H,{name:["form_body","columns",s],value:JSON.stringify(l.value[s])},null,8,["name","value"]),n("div",{id:"manage-column-".concat(o.id),class:"manage-column manage-element"},[r(e(z),{class:"manage-element-btns"},{default:a(()=>[o.elementClass!=="add-to-cart-checkbox"?(d(),u(e(c),{key:0,title:e(m)("elementSettings",e(wp.i18n.__)("Element Settings","woocommerce-wholesale-order-form"))},{default:a(()=>[r(e(A),{onClick:k=>e(M)(e(w).FORM_BODY,{columnIndex:s})},null,8,["onClick"])]),_:2},1032,["title"])):N("",!0),r(e(c),{title:e(m)("reOrderElement",e(wp.i18n.__)("Re-order Element","woocommerce-wholesale-order-form"))},{default:a(()=>[r(e(G),{class:"dnd-handle-table-field dnd-handle"})]),_:1},8,["title"]),r(e(c),{title:e(m)("deleteElement",e(wp.i18n.__)("Delete Element","woocommerce-wholesale-order-form"))},{default:a(()=>[r(e(I),{title:e(m)("deleteColumnConfirm",e(wp.i18n.__)("Are you sure you want to delete this column?","woocommerce-wholesale-order-form")),"ok-text":e(m)("yes",e(wp.i18n.__)("Yes","woocommerce-wholesale-order-form")),"cancel-text":e(m)("no",e(wp.i18n.__)("No","woocommerce-wholesale-order-form")),onConfirm:k=>h(o.id)},{icon:a(()=>[r(e(P))]),default:a(()=>[r(e(L),{class:"wwof-delete-column"})]),_:2},1032,["title","ok-text","cancel-text","onConfirm"])]),_:2},1032,["title"])]),_:2},1024),r(J,{field:o},null,8,["field"])],8,W)],10,Q))]),_:2},[l.value.length<1?{name:"header",fn:a(()=>[n("th",q,[n("div",K,[n("span",null,$(e(m)("dropTableColumns",e(wp.i18n.__)("Drop Table Columns Here","woocommerce-wholesale-order-form"))),1)])])]),key:"0"}:void 0]),1032,["modelValue","class"]))}}),io=U(X,[["__scopeId","data-v-e03ad8d0"]]);export{io as default};
