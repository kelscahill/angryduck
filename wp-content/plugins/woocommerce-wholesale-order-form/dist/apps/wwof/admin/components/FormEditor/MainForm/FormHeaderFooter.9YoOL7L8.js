import{g as i,I as ye,d as _e,c as v,G as be,b as Ce,o as B,f as N,M as f,O as T,L as q,u as t,l as m,J as Q,aa as P,k as xe,N as Oe}from"../../../../../../common/LoadingOutlined.BFkAxzyV.js";import{S as X,c as u,h as Se,t as A,E as Z,i as K,v as W,x as ee}from"../../../../../../common/index.Ith4SzXf.js";import{D as L}from"../../../../../../common/vuedraggable.umd.kDerP-51.js";import{_ as Re}from"../../../../../../common/FormHeaderFooterElement.vue_vue_type_script_setup_true_lang.VVWr5nAI.js";import{_ as z}from"../../../../../../common/HiddenFormInput.vue_vue_type_script_setup_true_lang.CzayNTE-.js";import{S as M}from"../../../../../../common/SettingOutlined.BlAlQy5X.js";import{S as te}from"../../../../../../common/index.C08f97vy.js";import{D as oe}from"../../../../../../common/DragOutlined.DArnxku8.js";import{D as le}from"../../../../../../common/DeleteOutlined.DS1yXUts.js";import{B as $e}from"../../../../../../common/index.Bdw1ik1L.js";import{T as h}from"../../../../../../common/index.BVxneXNm.js";import{P as ne}from"../../../../../../common/index.DqmYKZtO.js";import{_ as Fe}from"../../../../../../common/_plugin-vue_export-helper.DlAUqK2U.js";import"../../../../../../common/_commonjsHelpers.BosuxZz1.js";import"../../../../../../common/ExclamationCircleFilled.CrW3q_TN.js";import"../../../../../../common/header-footer-elements.CLjj6bYa.js";import"../../../../../../common/SearchOutlined.K2PZqdQC.js";import"../../../../../../common/ShoppingCartOutlined.B2D8qpCU.js";import"../../../../../../common/DownloadOutlined.D7JVmMHp.js";import"../../../../../../common/HeartOutlined.D18KqHsH.js";import"../../../../../../common/LoadingSpinner.vue_vue_type_script_setup_true_lang.BM77UlPO.js";import"../../../../../../common/index.CjASPO7n.js";import"../../../../../../common/initDefaultProps.0LfrQis0.js";import"../../../../../../common/index.K13Y4VJm.js";import"../../../../../../common/motion.WGHlFb5s.js";import"../../../../../../common/raf.Deuc0E8-.js";import"../../../../../../common/vnode.BC_D2aP8.js";import"../../../../../../common/isVisible.BHYmLg1T.js";import"../../../../../../common/ResizeObserver.es.B1PUzC5B.js";import"../../../../../../common/_getTag.CiIQqq4n.js";import"../../../../../../common/PortalWrapper.BCGj8rtm.js";import"../../../../../../common/isPlainObject.DIpfZ0jz.js";import"../../../../../../common/Col.C48UZKBg.js";import"../../../../../../common/responsiveObserve.BxgVt-aQ.js";import"../../../../../../common/useFlexGapSupport.BqBlA3Mn.js";import"../../../../../../common/styleChecker.BhhSW-4N.js";import"../../../../../../common/warning.CrM1WiW4.js";import"../../../../../../common/debounce.C88Ko_T_.js";import"../../../../../../common/_arrayIncludes.B8uzE354.js";import"../../../../../../common/QuestionCircleOutlined.DbypaJli.js";import"../../../../../../common/collapseMotion.CnwYBKtm.js";import"../../../../../../common/FormItemContext.CuFDkfIX.js";import"../../../../../../common/createContext.DiHI9yzd.js";import"../../../../../../common/index.lxr2aJRu.js";import"../../../../../../common/statusUtils.DES_qYlM.js";import"../../../../../../common/omit.DTkbSo29.js";import"../../../../../../common/BaseInput.C6Ke7hb1.js";import"../../../../../../common/Compact.bO-KmQeW.js";import"../../../../../../common/index.CUGsZk5V.js";import"../../../../../../common/compact-item.Be3L5ggo.js";import"../../../../../../common/index.DjkvlaSA.js";import"../../../../../../common/useState.L1hofs5h.js";import"../../../../../../common/devWarning.BVoSASTV.js";import"../../../../../../common/firstNotUndefined.CLFzEa0p.js";import"../../../../../../common/colors.Do-YmLJ0.js";import"../../../../../../common/index.B2U_dx8i.js";import"../../../../../../common/useMergedState.DXdtLiCT.js";import"../../../../../../common/KeyCode.B_gOgbN6.js";import"../../../../../../common/ActionButton.CECSKzhY.js";import"../../../../../../common/useDestroyed.puOwgd-l.js";var De={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};function ie(c){for(var l=1;l<arguments.length;l++){var g=arguments[l]!=null?Object(arguments[l]):{},y=Object.keys(g);typeof Object.getOwnPropertySymbols=="function"&&(y=y.concat(Object.getOwnPropertySymbols(g).filter(function(_){return Object.getOwnPropertyDescriptor(g,_).enumerable}))),y.forEach(function(_){ke(c,_,g[_])})}return c}function ke(c,l,g){return l in c?Object.defineProperty(c,l,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[l]=g,c}var V=function(l,g){var y=ie({},l,g.attrs);return i(ye,ie({},y,{icon:De}),null)};V.displayName="PlusCircleOutlined";V.inheritAttrs=!1;const Be={class:"form-section-heading"},Te=["title"],Ve={key:0,class:"wwof-tw-w-1/2"},Ee=["id"],He={class:"wwof-tw-flex wwof-tw-flex-col wwof-tw-w-full"},je=["id"],Ne=["id"],Pe={class:"wwof-add-column wwof-tw-w-1/3"},Ae=["data-row-id"],We={class:"manage-element wwof-tw-w-1/3 wwof-tw-flex wwof-tw-justify-end"},Le=["id"],ze=["id"],Me={class:"column-fields"},Ue=_e({__name:"FormHeaderFooter",props:{formSection:{}},setup(c){var I,J,Y;const l=v(()=>c.formSection==="header"?X.FORM_HEADER:X.FORM_FOOTER),g=v(()=>c.formSection==="header"?u("formHeader",wp.i18n.__("Form Header","woocommerce-wholesale-order-form")):u("formFooter",wp.i18n.__("Form Footer","woocommerce-wholesale-order-form"))),y=v(()=>c.formSection==="header"?u("formHeaderSettings",wp.i18n.__("Form Header Settings","woocommerce-wholesale-order-form")):u("formFooterSettings",wp.i18n.__("Form Footer Settings","woocommerce-wholesale-order-form"))),_=Se(),{draggingHeaderFooterRow:E,draggingHeaderFooterColumn:H,draggingHeaderFooterElement:j,formPost:d}=be(_),b=Ce({}),se=n=>{n.preventDefault();const e=n.currentTarget.getAttribute("data-row-id");U(e)},re=()=>{const n=K();d.value[l.value].rows.push({id:n,columns:[],settings:{styles:null,options:null}}),U(n)},ae=n=>{const e=d.value[l.value].rows.findIndex(o=>o.id===n);d.value[l.value].rows=W(d.value[l.value].rows,{$splice:[[e,1]]}),ee()},de=(n,e)=>{const o=d.value[l.value].rows.findIndex(s=>s.id===n),a=d.value[l.value].rows[o].columns.findIndex(s=>s.id===e);d.value[l.value].rows=W(d.value[l.value].rows,{[o]:{columns:{$splice:[[a,1]]}}}),b.value[n]--,ee()},me=v(()=>["wwof-row-draggable",E.value&&"wwof-tw-bg-amber-100"].filter(Boolean).join(" ")),ue=v(()=>["wwof-column-draggable",H.value&&"wwof-tw-bg-amber-100"].filter(Boolean).join(" ")),we=v(()=>["wwof-column-field-draggable",j.value&&"wwof-tw-bg-amber-100"].filter(Boolean).join(" ")),fe=()=>{A(l.value,{})},U=n=>{const e=d.value[l.value].rows.findIndex(a=>a.id===n),o={id:K(),fields:[],settings:{styles:null,options:null}};d.value[l.value].rows[e].columns=W(d.value[l.value].rows[e].columns,{$push:[o]}),b.value[n]!=null?b.value[n]++:b.value[n]=1},r=(Y=(J=(I=d.value)==null?void 0:I[l.value])==null?void 0:J.settings)==null?void 0:Y.styles,ce=v(()=>{let n={};return(r==null?void 0:r.margin)!=null&&(n={marginTop:r.margin.top+r.margin.unit,marginRight:r.margin.right+r.margin.unit,marginBottom:r.margin.bottom+r.margin.unit,marginLeft:r.margin.left+r.margin.unit}),(r==null?void 0:r.padding)!=null&&(n={...n,paddingTop:r.padding.top+r.padding.unit,paddingRight:r.padding.right+r.padding.unit,paddingBottom:r.padding.bottom+r.padding.unit,paddingLeft:r.padding.left+r.padding.unit}),n}),ge=n=>{var a,s,p,w,C,x,O,S,R,$,F,D,k;const e=n==null?void 0:n.settings;let o={};return((a=e==null?void 0:e.styles)==null?void 0:a.margin)!=null&&(o={marginTop:((s=e.styles.margin)==null?void 0:s.top)!=null?e.styles.margin.top+e.styles.margin.unit:null,marginRight:((p=e.styles.margin)==null?void 0:p.right)!=null?e.styles.margin.right+e.styles.margin.unit:null,marginBottom:((w=e.styles.margin)==null?void 0:w.bottom)!=null?e.styles.margin.bottom+e.styles.margin.unit:null,marginLeft:((C=e.styles.margin)==null?void 0:C.left)!=null?e.styles.margin.left+e.styles.margin.unit:null}),((x=e==null?void 0:e.styles)==null?void 0:x.padding)!=null&&(o={...o,paddingTop:((O=e.styles.padding)==null?void 0:O.top)!=null?e.styles.padding.top+e.styles.padding.unit:null,paddingRight:((S=e.styles.padding)==null?void 0:S.right)!=null?e.styles.padding.right+e.styles.padding.unit:null,paddingBottom:((R=e.styles.padding)==null?void 0:R.bottom)!=null?e.styles.padding.bottom+e.styles.padding.unit:null,paddingLeft:(($=e.styles.padding)==null?void 0:$.left)!=null?e.styles.padding.left+e.styles.padding.unit:null}),((F=e==null?void 0:e.styles)==null?void 0:F.boxWidth)!=null&&(o={...o,width:((D=e.styles.boxWidth)==null?void 0:D.width)+null?e.styles.boxWidth.width+e.styles.boxWidth.unit:null}),((k=e==null?void 0:e.styles)==null?void 0:k.rowAlignment)!=null&&(o={...o,"--wwof-row-alignment":e.styles.rowAlignment}),o},pe=n=>{var a,s,p,w,C,x,O,S,R,$,F,D,k,G;const e=n==null?void 0:n.settings;let o={};return((a=e==null?void 0:e.styles)==null?void 0:a.margin)!=null&&(o={marginTop:((s=e.styles.margin)==null?void 0:s.top)!=null?e.styles.margin.top+e.styles.margin.unit:null,marginRight:((p=e.styles.margin)==null?void 0:p.right)!=null?e.styles.margin.right+e.styles.margin.unit:null,marginBottom:((w=e.styles.margin)==null?void 0:w.bottom)!=null?e.styles.margin.bottom+e.styles.margin.unit:null,marginLeft:((C=e.styles.margin)==null?void 0:C.left)!=null?e.styles.margin.left+e.styles.margin.unit:null}),((x=e==null?void 0:e.styles)==null?void 0:x.padding)!=null&&(o={...o,paddingTop:((O=e.styles.padding)==null?void 0:O.top)!=null?e.styles.padding.top+e.styles.padding.unit:null,paddingRight:((S=e.styles.padding)==null?void 0:S.right)!=null?e.styles.padding.right+e.styles.padding.unit:null,paddingBottom:((R=e.styles.padding)==null?void 0:R.bottom)!=null?e.styles.padding.bottom+e.styles.padding.unit:null,paddingLeft:(($=e.styles.padding)==null?void 0:$.left)!=null?e.styles.padding.left+e.styles.padding.unit:null}),((F=e==null?void 0:e.styles)==null?void 0:F.boxWidth)!=null&&(o={...o,width:((D=e.styles.boxWidth)==null?void 0:D.width)!=null?e.styles.boxWidth.width+e.styles.boxWidth.unit:null,maxWidth:((k=e.styles.boxWidth)==null?void 0:k.width)!=null&&((G=e.styles.boxWidth)==null?void 0:G.width)!==""?"100%":null}),o},ve=v(()=>{var n,e,o,a;return["form-section-title","wwof-tw-w-1/2",((a=(o=(e=(n=d.value)==null?void 0:n[l.value])==null?void 0:e.settings)==null?void 0:o.options)==null?void 0:a["show_".concat(l.value)])==="no"&&"wwof-tw-text-gray-400 wwof-tw-italic"].filter(Boolean).join(" ")}),he=v(()=>{var n,e,o,a;return((a=(o=(e=(n=d.value)==null?void 0:n[l.value])==null?void 0:e.settings)==null?void 0:o.options)==null?void 0:a["show_".concat(l.value)])==="no"?wp.i18n.sprintf(u("formSectionHideDesc",wp.i18n.__("Currently, set to NOT show %1$s section.","woocommerce-wholesale-order-form")),g.value):""});return(n,e)=>(B(),N(Oe,null,[f("div",Be,[f("h4",{class:T(ve.value),title:he.value},q(g.value),11,Te),t(d)[l.value].rows.length>0?(B(),N("div",Ve,[i(t(h),{title:y.value},{default:m(()=>[i(t(M),{onClick:fe})]),_:1},8,["title"])])):Q("",!0)]),f("div",{id:"form-editor-".concat(n.formSection),class:"wwof-section",style:P(ce.value)},[i(z,{name:[l.value,"settings"],value:JSON.stringify(t(d)[l.value].settings)},null,8,["name","value"]),f("div",He,[i(t(L),{modelValue:t(d)[l.value].rows,"onUpdate:modelValue":e[4]||(e[4]=o=>t(d)[l.value].rows=o),group:"wwof-row","item-key":"id","ghost-class":"wwof-dragging-row",class:T(me.value),handle:".dnd-handle-row",onStart:e[5]||(e[5]=o=>E.value=!0),onEnd:e[6]||(e[6]=o=>E.value=!1)},{item:m(({element:o,index:a})=>[(B(),N("div",{id:"row-".concat(o.id),key:o.id,class:"wwof-row",style:P(ge(o))},[i(z,{name:[l.value,"rows",a],value:JSON.stringify(t(d)[l.value].rows[a])},null,8,["name","value"]),f("div",{id:"manage-row-".concat(o.id),class:"manage-row wwof-tw-flex wwof-tw-flex-row"},[e[7]||(e[7]=f("div",{class:"wwof-tw-w-1/3 wwof-tw-hidden md:wwof-tw-flex"},null,-1)),f("div",Pe,[b.value[o.id]==null||b.value[o.id]<4?(B(),xe(t(h),{key:0,title:t(u)("addRowColumn",t(wp.i18n.__)("Add column to this row","woocommerce-wholesale-order-form"))},{default:m(()=>[f("a",{"data-row-id":o.id,href:"#",onClick:se},[i(t(V),{class:"wwof-add-column-icon"})],8,Ae)]),_:2},1032,["title"])):Q("",!0)]),f("div",We,[i(t(te),null,{default:m(()=>[i(t(h),{title:t(u)("rowSettings",t(wp.i18n.__)("Rows Settings","woocommerce-wholesale-order-form"))},{default:m(()=>[i(t(M),{class:"setting-icon",onClick:s=>t(A)(l.value,{rowIndex:a})},null,8,["onClick"])]),_:2},1032,["title"]),i(t(h),{title:t(u)("reOrderRow",t(wp.i18n.__)("Re-order Row","woocommerce-wholesale-order-form"))},{default:m(()=>[i(t(oe),{class:"dnd-handle-row dnd-handle"})]),_:1},8,["title"]),i(t(h),{title:t(u)("deleteRow",t(wp.i18n.__)("Delete Row","woocommerce-wholesale-order-form"))},{default:m(()=>[i(t(ne),{title:t(u)("deleteRowConfirm",t(wp.i18n.__)("Are you sure you want to delete this row?","woocommerce-wholesale-order-form")),"ok-text":t(u)("yes",t(wp.i18n.__)("Yes","woocommerce-wholesale-order-form")),"cancel-text":t(u)("no",t(wp.i18n.__)("No","woocommerce-wholesale-order-form")),onConfirm:s=>ae(o.id)},{icon:m(()=>[i(t(Z))]),default:m(()=>[i(t(le),{class:"wwof-delete-row"})]),_:2},1032,["title","ok-text","cancel-text","onConfirm"])]),_:2},1032,["title"])]),_:2},1024)])],8,Ne),i(t(L),{modelValue:o.columns,"onUpdate:modelValue":s=>o.columns=s,"item-key":"id",group:"wwof-column","ghost-class":"wwof-dragging-column",class:T(ue.value),handle:".dnd-handle-column",onStart:e[2]||(e[2]=s=>H.value=!0),onEnd:e[3]||(e[3]=s=>H.value=!1)},{item:m(({element:s,index:p})=>[f("div",{id:"wwof-column-".concat(s.id),class:"wwof-column",style:P(pe(s))},[i(z,{name:[l.value,"rows",a,"columns",p],value:JSON.stringify(t(d)[l.value].rows[a].columns[p])},null,8,["name","value"]),f("div",{id:"manage-column-".concat(s.id),class:"manage-column manage-element"},[i(t(te),{class:"wwof-tw-flex wwof-tw-flex-row wwof-tw-justify-end wwof-tw-p-1"},{default:m(()=>[i(t(h),{title:t(u)("columnSettings",t(wp.i18n.__)("Column Settings","woocommerce-wholesale-order-form"))},{default:m(()=>[i(t(M),{onClick:w=>t(A)(l.value,{rowIndex:a,columnIndex:p})},null,8,["onClick"])]),_:2},1032,["title"]),i(t(h),{title:t(u)("reOrderColumn",t(wp.i18n.__)("Re-order Column","woocommerce-wholesale-order-form"))},{default:m(()=>[i(t(oe),{class:"dnd-handle-column dnd-handle"})]),_:1},8,["title"]),i(t(h),{title:t(u)("deleteColumn",t(wp.i18n.__)("Delete Column","woocommerce-wholesale-order-form"))},{default:m(()=>[i(t(ne),{title:t(u)("deleteColumnConfirm",t(wp.i18n.__)("Are you sure you want to delete this column?","woocommerce-wholesale-order-form")),"ok-text":t(u)("yes",t(wp.i18n.__)("Yes","woocommerce-wholesale-order-form")),"cancel-text":t(u)("no",t(wp.i18n.__)("No","woocommerce-wholesale-order-form")),onConfirm:w=>de(o.id,s.id)},{icon:m(()=>[i(t(Z))]),default:m(()=>[i(t(le),{class:"wwof-delete-column"})]),_:2},1032,["title","ok-text","cancel-text","onConfirm"])]),_:2},1032,["title"])]),_:2},1024)],8,ze),f("div",Me,[i(t(L),{modelValue:s.fields,"onUpdate:modelValue":w=>s.fields=w,handle:".dnd-handle-field",group:"header-footer-elements","ghost-class":"wwof-dragging-field",class:T(we.value),"item-key":"id",onStart:e[0]||(e[0]=w=>j.value=!0),onEnd:e[1]||(e[1]=w=>j.value=!1)},{item:m(({element:w})=>[i(Re,{"field-id":w.id,"element-class":w.elementClass,"row-id":o.id,"column-id":s.id,"form-post":t(d),"section-name":l.value},null,8,["field-id","element-class","row-id","column-id","form-post","section-name"])]),_:2},1032,["modelValue","onUpdate:modelValue","class"])])],12,Le)]),_:2},1032,["modelValue","onUpdate:modelValue","class"])],12,je))]),_:1},8,["modelValue","class"])]),i(t($e),{size:"small",class:"wwof-tw-justify-items-center wwof-tw-border wwof-tw-border-solid wwof-tw-border-gray-400",onClick:re},{icon:m(()=>[i(t(V))]),default:m(()=>[f("span",null,q(t(u)("addRow",t(wp.i18n.__)("Add Row","woocommerce-wholesale-order-form"))),1)]),_:1})],12,Ee)],64))}}),Xt=Fe(Ue,[["__scopeId","data-v-d56cb480"]]);export{Xt as default};
