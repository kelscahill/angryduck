import{a as s,N as lt,O as nt,L as at,_ as ot,$ as st,j as E,w as B,g as V,a0 as H,S as it,u as e,z as ze,R as rt,d as ut,l as b,m as N,B as p,C as g,q as D,x as i,F as J,D as dt,G as j,E as U,a1 as xe,a2 as ct}from"../../../../../common/vue.esm-bundler.Eb_t0ZuK.js";import{u as pt,a as ft,e as ae}from"../../index.DsLwCX30.js";import{i as o,p as S,l as A,g as mt}from"../../../../../common/index.ln50ek6N.js";import{u as vt}from"../../../../../common/index.DnrX9VWK.js";import{I as We,s as yt}from"../../../../../common/LoadingOutlined.BwWHly1W.js";import{_ as ht}from"../../../../../common/BreakdownDueLabel.vue_vue_type_script_setup_true_lang.DAWyiZw-.js";import{S as ke,c as _t}from"../../../../../common/Modal.CTSvrbAV.js";import{a as gt}from"../../../../../common/axios.Ce6w_M6R.js";import{a as q}from"../../../../../common/index.BWmZUCTt.js";import{C as De}from"../../../../../common/index.Q4Ca_hsJ.js";import{S as wt}from"../../../../../common/index.48pRU0nw.js";import{C as Le}from"../../../../../common/CheckOutlined.2I5Jb425.js";import{a as oe,I as Z}from"../../../../../common/InfoCircleFilled.CuIgY0ZM.js";import{T as z}from"../../../../../common/index.CugMjDrc.js";import{T as Re,I as Ne}from"../../../../../common/index.P07xck3P.js";import{P as Ue,D as bt}from"../../../../../common/DeleteOutlined.dGIg9UMc.js";import{S as He}from"../../../../../common/index.salE0Mpj.js";import{S as K}from"../../../../../common/index.BnCduRLt.js";import{B as Q}from"../../../../../common/index.DO4rv7yP.js";import{R as F}from"../../../../../common/index.CirbKzNG.js";import{C as x}from"../../../../../common/index.DyDRXpIC.js";import{_ as Et}from"../../../../../common/_plugin-vue_export-helper.DlAUqK2U.js";import"../../../../../common/preload-helper.03U_i1H8.js";import"../../../../../common/zoom._5t9uMJA.js";import"../../../../../common/Compact.BekGZffk.js";import"../../../../../common/FormItemContext.kpf8ZKmg.js";import"../../../../../common/CloseCircleFilled.DLp4Uax1.js";import"../../../../../common/index.wAr7hMel.js";import"../../../../../common/pickAttrs.CO1oKgar.js";import"../../../../../common/styleChecker.Cz-BSt7T.js";import"../../../../../common/vnode.CxjOFO7d.js";import"../../../../../common/RightOutlined.BY8RmgBD.js";import"../../../../../common/firstNotUndefined.CLFzEa0p.js";import"../../../../../common/collapseMotion.BXIWmnEP.js";import"../../../../../common/ResizeObserver.es.B1PUzC5B.js";import"../../../../../common/index.B8aA5X96.js";import"../../../../../common/EyeOutlined.CfrxM5mT.js";import"../../../../../common/slide.Ctdi1QYn.js";import"../../../../../common/useFlexGapSupport.DGl5WWhP.js";var Pt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"question-circle",theme:"outlined"};function Ie(t){for(var n=1;n<arguments.length;n++){var l=arguments[n]!=null?Object(arguments[n]):{},u=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(l).filter(function(d){return Object.getOwnPropertyDescriptor(l,d).enumerable}))),u.forEach(function(d){Ot(t,d,l[d])})}return t}function Ot(t,n,l){return n in t?Object.defineProperty(t,n,{value:l,enumerable:!0,configurable:!0,writable:!0}):t[n]=l,t}var ue=function(n,l){var u=Ie({},n,l.attrs);return s(We,Ie({},u,{icon:Pt}),null)};ue.displayName="QuestionCircleOutlined";ue.inheritAttrs=!1;var St={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};function Be(t){for(var n=1;n<arguments.length;n++){var l=arguments[n]!=null?Object(arguments[n]):{},u=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(l).filter(function(d){return Object.getOwnPropertyDescriptor(l,d).enumerable}))),u.forEach(function(d){Ct(t,d,l[d])})}return t}function Ct(t,n,l){return n in t?Object.defineProperty(t,n,{value:l,enumerable:!0,configurable:!0,writable:!0}):t[n]=l,t}var de=function(n,l){var u=Be({},n,l.attrs);return s(We,Be({},u,{icon:St}),null)};de.displayName="PlusCircleOutlined";de.inheritAttrs=!1;function te(t){return lt()?(nt(t),!0):!1}const Ve=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Tt=t=>t!=null,Mt=Object.prototype.toString,xt=t=>Mt.call(t)==="[object Object]",$e=()=>{},je=kt();function kt(){var t,n;return Ve&&((t=window==null?void 0:window.navigator)==null?void 0:t.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((n=window==null?void 0:window.navigator)==null?void 0:n.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function ee(t){return Array.isArray(t)?t:[t]}function Dt(...t){if(t.length!==1)return at(...t);const n=t[0];return typeof n=="function"?ot(st(()=>({get:n,set:$e}))):E(n)}function Lt(t,n,l){return B(t,n,{...l,immediate:!0})}const le=Ve?window:void 0;function ne(t){var n;const l=H(t);return(n=l==null?void 0:l.$el)!=null?n:l}function re(...t){const n=[],l=()=>{n.forEach(r=>r()),n.length=0},u=(r,m,v,w)=>(r.addEventListener(m,v,w),()=>r.removeEventListener(m,v,w)),d=V(()=>{const r=ee(H(t[0])).filter(m=>m!=null);return r.every(m=>typeof m!="string")?r:void 0}),y=Lt(()=>{var r,m;return[(m=(r=d.value)==null?void 0:r.map(v=>ne(v)))!=null?m:[le].filter(v=>v!=null),ee(H(d.value?t[1]:t[0])),ee(e(d.value?t[2]:t[1])),H(d.value?t[3]:t[2])]},([r,m,v,w])=>{if(l(),!(r!=null&&r.length)||!(m!=null&&m.length)||!(v!=null&&v.length))return;const C=xt(w)?{...w}:w;n.push(...r.flatMap(P=>m.flatMap(T=>v.map(M=>u(P,T,M,C)))))},{flush:"post"}),_=()=>{y(),l()};return te(l),_}function Rt(){const t=E(!1),n=rt();return n&&ze(()=>{t.value=!0},n),t}function Nt(t){const n=Rt();return V(()=>(n.value,!!t()))}function Ut(t,n,l={}){const{window:u=le,...d}=l;let y;const _=Nt(()=>u&&"MutationObserver"in u),r=()=>{y&&(y.disconnect(),y=void 0)},m=V(()=>{const P=H(t),T=ee(P).map(ne).filter(Tt);return new Set(T)}),v=B(()=>m.value,P=>{r(),_.value&&P.size&&(y=new MutationObserver(n),P.forEach(T=>y.observe(T,d)))},{immediate:!0,flush:"post"}),w=()=>y==null?void 0:y.takeRecords(),C=()=>{v(),r()};return te(C),{isSupported:_,stop:C,takeRecords:w}}function Ht(t,n,l={}){const{window:u=le,document:d=u==null?void 0:u.document,flush:y="sync"}=l;if(!u||!d)return $e;let _;const r=w=>{_==null||_(),_=w},m=it(()=>{const w=ne(t);if(w){const{stop:C}=Ut(d,P=>{P.map(M=>[...M.removedNodes]).flat().some(M=>M===w||M.contains(w))&&n(P)},{window:u,childList:!0,subtree:!0});r(C)}},{flush:y}),v=()=>{m(),r()};return te(v),v}function Ae(t,n={}){const{delayEnter:l=0,delayLeave:u=0,triggerOnRemoval:d=!1,window:y=le}=n,_=E(!1);let r;const m=v=>{const w=v?l:u;r&&(clearTimeout(r),r=void 0),w?r=setTimeout(()=>_.value=v,w):_.value=v};return y&&(re(t,"mouseenter",()=>m(!0),{passive:!0}),re(t,"mouseleave",()=>m(!1),{passive:!0}),d&&Ht(V(()=>ne(t)),()=>m(!1))),_}const It={mounted(t,n){const l=n.value;if(typeof l=="function"){const u=Ae(t);B(u,d=>l(d))}else{const[u,d]=l,y=Ae(t,d);B(y,_=>u(_))}}};function se(t){return typeof Window<"u"&&t instanceof Window?t.document.documentElement:typeof Document<"u"&&t instanceof Document?t.documentElement:t}function Qe(t){const n=window.getComputedStyle(t);if(n.overflowX==="scroll"||n.overflowY==="scroll"||n.overflowX==="auto"&&t.clientWidth<t.scrollWidth||n.overflowY==="auto"&&t.clientHeight<t.scrollHeight)return!0;{const l=t.parentNode;return!l||l.tagName==="BODY"?!1:Qe(l)}}function Bt(t){const n=t||window.event,l=n.target;return Qe(l)?!1:n.touches.length>1?!0:(n.preventDefault&&n.preventDefault(),!1)}const ie=new WeakMap;function jt(t,n=!1){const l=E(n);let u=null,d="";B(Dt(t),r=>{const m=se(H(r));if(m){const v=m;if(ie.get(v)||ie.set(v,v.style.overflow),v.style.overflow!=="hidden"&&(d=v.style.overflow),v.style.overflow==="hidden")return l.value=!0;if(l.value)return v.style.overflow="hidden"}},{immediate:!0});const y=()=>{const r=se(H(t));!r||l.value||(je&&(u=re(r,"touchmove",m=>{Bt(m)},{passive:!1})),r.style.overflow="hidden",l.value=!0)},_=()=>{const r=se(H(t));!r||!l.value||(je&&(u==null||u()),r.style.overflow=d,ie.delete(r),l.value=!1)};return te(_),V({get(){return l.value},set(r){r?y():_()}})}function At(){let t=!1;const n=E(!1);return(l,u)=>{if(n.value=u.value,t)return;t=!0;const d=jt(l,u.value);B(n,y=>d.value=y)}}At();var qe;const Fe=(qe=window.wpayObj)!=null&&qe.maxRequests?Number(window.wpayObj.maxRequests):8,qt=Math.floor(1e3/Fe);let W=0;const zt=(t={},n={})=>{const l=n.maxRequests||Fe,u=n.intervalInMs||qt,d=gt.create({timeout:3e4,responseType:"json",headers:{"Content-Type":"application/json;charset=UTF-8","X-WP-Nonce":window.wpayObj.wpNonce,Nonce:window.wpayObj.wcNonce},baseURL:window.wpayObj.usersApiUrl,...t});return d.interceptors.request.use(y=>new Promise(_=>{let r=setInterval(()=>{W<l&&(W++,clearInterval(r),_(y))},u)})),d.interceptors.response.use(y=>(W=Math.max(0,W-1),Promise.resolve(y)),y=>(W=Math.max(0,W-1),Promise.reject({error:y.response.data}))),d},Wt={class:"wpayment-plan-editor"},Vt={class:"editor-heading"},$t={key:1,class:"payment-plan-details-container"},Qt={class:"editor-desc"},Ft={class:"plan-status-switch"},Gt={class:"edit-plan-field-label"},Xt=["innerHTML"],Yt={class:"edit-plan-field-label"},Jt=["innerHTML"],Zt={class:"breakdown-container"},Kt={class:"breakdown-label"},el=["innerHTML"],tl=["innerHTML"],ll={class:"breakdown-label"},nl=["innerHTML"],al={class:"add-breakdown-payment"},ol=["innerHTML"],sl={class:"apply-restrictions-switch-container"},il={key:0,class:"apply-restriction-fields"},rl={class:"edit-plan-field-label"},ul=["innerHTML"],dl={class:"edit-plan-field-label"},cl=["innerHTML"],pl={class:"wpay-tw-inline-block wpay-tw-mr-2"},fl={class:"wpay-tw-inline-block wpay-tw-mr-2"},ml=ut({__name:"PaymentPlanEditor",setup(t){const n=vt(),{paymentPlan:l}=yt(n),u=pt(),d=ft(),{getQueryArgs:y}=window.wp.url,{sprintf:_}=window.wp.i18n,r=E(!1),m=E(!1),v=E(!1),w=E(!1),C=E(!1),P=E(!0),T=E(""),M=E(""),k=E([]),G=E([]),I=E([]),X=E(""),ce=E([]),Y=E(!1),$=E(!1);let Ge=e(P),pe="",fe="",me=[];const ve=()=>{var h,c,f,a,L,O,R,ge,we,be,Ee,Pe,Oe,Se,Ce,Te,Me;T.value=(c=(h=l.value)==null?void 0:h.post.post_title)!=null?c:"",M.value=(a=(f=l.value)==null?void 0:f.post.post_content)!=null?a:"",k.value=(O=(L=l.value)==null?void 0:L.breakdown)!=null?O:[],P.value=((R=l.value)==null?void 0:R.enabled)==="yes",G.value=window.lodash.isEmpty((ge=l.value)==null?void 0:ge.wholesale_roles)?[]:(we=l.value)==null?void 0:we.wholesale_roles,I.value=window.lodash.isEmpty((be=l.value)==null?void 0:be.allowed_users)?[]:(Ee=l.value)==null?void 0:Ee.allowed_users,$.value=((Pe=l.value)==null?void 0:Pe.apply_restrictions)==="yes",pe=T.value,fe=M.value,me=[...k.value],X.value=(Te=(Ce=(Se=(Oe=l.value)==null?void 0:Oe.breakdown)==null?void 0:Se[0])==null?void 0:Ce.id)!=null?Te:"",C.value=!1,(Me=I.value)!=null&&Me.length&&I.value.length>0&&_e(I.value)};ze(()=>{l.value==null&&u.query.edit!=null&&Number.isInteger(Number(u.query.edit))?(r.value=!0,n.getPaymentPlan(u.query.edit).then(h=>{l.value=h.data,ve()}).catch(h=>{q.error({message:o().notice.error,description:S(h.error.message)}),console.log(h)}).finally(()=>{r.value=!1})):ve()});const ye=()=>{const h=y(A().adminBaseUrl);if(!C.value){d.push({query:{...h}});return}_t({title:o().planEditor.notice.unsavedChanges,content:o().planEditor.notice.unsavedChangesDesc,okText:o().planEditor.label.yes,cancelText:o().planEditor.label.no,onOk:()=>{d.push({query:{...h}})}})},he=V(()=>!(k.value.some(c=>c.due.type==="fixed")||k.value.reduce((c,f)=>f.due.type==="percentage"?c+Number(f.due.value):c,0)<100)),Xe=()=>{const h={id:mt(),day:k.value.length<1?"0":String(k.value.reduce((c,f)=>isNaN(f.day)&&(f==null?void 0:f.day_display)!=null?c+Number(f==null?void 0:f.day_display):c+Number(f.day),0)+30),day_format:"day",due:{type:"fixed",value:0},payment_reminder:{enabled:!1,day:1},overdue_reminder:{enabled:!1,day:1}};k.value.push(h),X.value=h.id},Ye=()=>{var f,a,L,O;const h={set_status:"no",title:T.value,description:M.value,breakdown:k.value,enabled:P.value?"yes":"no",wholesale_roles:(f=G.value)!=null?f:[],allowed_users:(a=I.value)!=null?a:[],apply_restrictions:$.value?"yes":"no"},c=(O=(L=l.value)==null?void 0:L.post.ID)!=null?O:"";m.value=!0,n.savePaymentPlan(h,c).then(R=>{q.success({message:o().notice.success,description:S(R.data.message)}),C.value=!1,u.query.edit==="new"&&(l.value=R.data.plan,d.push({query:{...y(A().adminBaseUrl),edit:R.data.plan.post.ID},replace:!0}))}).catch(R=>{q.error({message:o().notice.error,description:S(R.error.message)}),console.log(R)}).finally(()=>{m.value=!1})},Je=h=>{k.value.splice(h,1)},Ze=h=>{w.value=h&&he.value},Ke=()=>{var c;const h=(c=l.value)==null?void 0:c.post.ID;v.value=!0,n.deletePaymentPlan(h).then(f=>{q.success({message:o().notice.success,description:S(f.data.message)}),d.push({query:{...y(A().adminBaseUrl)}})}).catch(f=>{q.error({message:o().notice.error,description:S(f.error.message)}),console.log(f)}).finally(()=>{v.value=!1})},_e=h=>{let c={_fields:"id,name,display_name",search:"",include:""};typeof h=="string"?c={...c,search:h}:c={...c,include:h.join(",")},Y.value=!0,zt().get("/",{params:c}).then(f=>{ce.value=f.data.map(a=>({label:a.display_name,value:a.id,key:a.id}))}).catch(f=>{q.error({message:o().notice.error,description:S(f.error.message)}),console.log(f)}).finally(()=>{Y.value=!1})},et=window.lodash.debounce(_e,500),tt=De.Panel;return B([()=>P.value,()=>T.value,()=>M.value,()=>k.value],([h,c,f,a])=>{h!==Ge||c!==pe||f!==fe||JSON.stringify(a)!==JSON.stringify(me)?C.value=!0:C.value=!1},{deep:!0}),(h,c)=>{var f;return b(),N("div",Wt,[p("h3",Vt,g(e(o)().heading.editPaymentPlan.label),1),r.value?(b(),D(e(wt),{key:0,active:!0,title:!1,paragraph:{rows:3,width:["90%","90%","90%"]}})):e(l)||((f=e(u).query)==null?void 0:f.edit)==="new"?(b(),N("div",$t,[p("p",Qt,g(e(o)().heading.editPaymentPlan.desc),1),p("div",Ft,[p("label",null,g(e(o)().planEditor.label.planEnabled),1),p("div",null,[s(e(ke),{checked:P.value,"onUpdate:checked":c[0]||(c[0]=a=>P.value=a),class:"plan-enable-switch"},{checkedChildren:i(()=>[s(e(Le))]),unCheckedChildren:i(()=>[s(e(oe))]),_:1},8,["checked"]),p("span",null,"  "+g(e(o)().planEditor.input.enabled),1)])]),p("div",Gt,[p("label",null,g(e(o)().planEditor.label.planName),1),s(e(z),{placement:"topLeft"},{title:i(()=>[p("span",{innerHTML:e(S)(e(o)().planEditor.label.planNameTooltip)},null,8,Xt)]),default:i(()=>[s(e(Z))]),_:1})]),s(e(Re),{value:T.value,"onUpdate:value":c[1]||(c[1]=a=>T.value=a),placeholder:e(o)().planEditor.placeholder.planName},null,8,["value","placeholder"]),p("div",Yt,[p("label",null,g(e(o)().planEditor.label.planDesc),1),s(e(z),{placement:"topLeft"},{title:i(()=>[p("span",{innerHTML:e(S)(e(o)().planEditor.label.planDescTooltip)},null,8,Jt)]),default:i(()=>[s(e(Z))]),_:1})]),s(e(Re),{value:M.value,"onUpdate:value":c[2]||(c[2]=a=>M.value=a),placeholder:e(o)().planEditor.placeholder.planDesc,"auto-size":{minRows:3,maxRows:10}},null,8,["value","placeholder"]),p("p",null,[p("strong",null,g(e(o)().planEditor.desc.planDesc),1)]),p("div",Zt,[p("p",null,[p("label",null,g(e(o)().planEditor.label.planBreakdown),1)]),s(e(De),{"active-key":X.value,"onUpdate:activeKey":c[3]||(c[3]=a=>X.value=a),bordered:!1},{default:i(()=>[(b(!0),N(J,null,dt(k.value,(a,L)=>(b(),D(e(tt),{key:a.id},{header:i(()=>[s(e(F),null,{default:i(()=>[s(e(x),{span:"6",class:"plan-breakdown-day"},{default:i(()=>[(a==null?void 0:a.day_format)==="timestamp"?(b(),N(J,{key:0},[j(g(a.day_display),1)],64)):a!=null&&a.day_display?(b(),N(J,{key:1},[j(g(e(o)().planEditor.label.day.replace("%d",a==null?void 0:a.day_display)),1)],64)):(b(),N(J,{key:2},[j(g(e(o)().planEditor.label.day.replace("%d",a.day)),1)],64))]),_:2},1024),s(e(x),{span:"14",class:"plan-breakdown-due"},{default:i(()=>[s(ht,{due:a.due},null,8,["due"])]),_:2},1024),s(e(x),{span:"4",class:"plan-breakdown-action"},{default:i(()=>[s(e(Ue),{title:e(o)().planEditor.notice.deleteBreakdown,onConfirm:O=>Je(L),"ok-text":e(o)().planEditor.label.yes,"cancel-text":e(o)().planEditor.label.no},{default:i(()=>[s(e(oe)),p("span",null,"  "+g(e(o)().planEditor.label.planDeleteBreakdown),1)]),_:2},1032,["title","onConfirm","ok-text","cancel-text"])]),_:2},1024)]),_:2},1024)]),default:i(()=>[s(e(F),{gutter:8,align:"middle"},{default:i(()=>[s(e(x),{span:"6",class:"label"},{default:i(()=>[p("p",Kt,g(e(o)().planEditor.label.breakdown.dayAfterOrder),1)]),_:2},1024),s(e(x),{span:"6",class:"input"},{default:i(()=>[s(e(Ne),{value:a.day,"onUpdate:value":O=>a.day=O,placeholder:e(o)().planEditor.placeholder.day.replace("%d",a.day),class:"breakdown-input"},null,8,["value","onUpdate:value","placeholder"])]),_:2},1024),s(e(x),{span:"12"},{default:i(()=>[e(A)().enabledAdvDueDays?(b(),D(e(He),{key:0},{default:i(()=>[s(e(K),{value:a.day_format,"onUpdate:value":O=>a.day_format=O,placeholder:e(o)().planEditor.label.selectFormat,options:[{label:e(o)().planEditor.input.day,value:"day"},{label:e(o)().planEditor.input.custom,value:"custom"},{label:e(o)().planEditor.input.timestamp,value:"timestamp"}],class:"breakdown-select"},null,8,["value","onUpdate:value","placeholder","options"]),["custom","timestamp"].includes(a.day_format)&&!e(window.lodash.isEmpty)(a.day)?(b(),D(e(z),{key:0,placement:"right"},{title:i(()=>[a.day_format==="custom"?(b(),N("span",{key:0,innerHTML:e(S)(e(_)(e(o)().planEditor.desc.customDesc,a.day))},null,8,el)):a.day_format==="timestamp"?(b(),N("span",{key:1,innerHTML:e(S)(e(_)(e(o)().planEditor.desc.timestampDesc,a.day))},null,8,tl)):U("",!0)]),default:i(()=>[s(e(ue))]),_:2},1024)):U("",!0)]),_:2},1024)):U("",!0)]),_:2},1024)]),_:2},1024),s(e(F),{gutter:8,align:"middle"},{default:i(()=>[s(e(x),{span:"6",class:"label"},{default:i(()=>[p("p",ll,g(e(o)().planEditor.label.breakdown.amountDue),1)]),_:2},1024),s(e(x),{span:"6",class:"input"},{default:i(()=>[s(e(K),{value:a.due.type,"onUpdate:value":O=>a.due.type=O,options:[{label:e(o)().planEditor.input.fixed,value:"fixed"},{label:e(o)().planEditor.input.percentage,value:"percentage"},{label:e(o)().planEditor.input.none,value:"none"}],class:"breakdown-select"},null,8,["value","onUpdate:value","options"])]),_:2},1024),s(e(x),{span:"12",class:"label"})]),_:2},1024),s(e(F),{gutter:8,align:"middle"},{default:i(()=>[s(e(x),{offset:"6",span:"6",class:"input"},{default:i(()=>[a.due.type==="fixed"||a.due.type==="percentage"?(b(),D(e(Ne),{key:0,value:a.due.value,"onUpdate:value":O=>a.due.value=O,placeholder:e(o)().planEditor.placeholder.amountDue,class:"wpay-tw-w-[9.8rem] breakdown-input-group","addon-after":a.due.type==="percentage"?"%":""},xe({_:2},[a.due.type==="fixed"?{name:"addonBefore",fn:i(()=>[p("span",{innerHTML:e(S)(e(A)().currencySymbol)},null,8,nl)]),key:"0"}:void 0]),1032,["value","onUpdate:value","placeholder","addon-after"])):U("",!0)]),_:2},1024),s(e(x),{span:"12",class:"label"})]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["active-key"])]),p("p",al,[ct((b(),D(e(Q),{class:"add-breakdown-payment-btn",disabled:he.value,onClick:Xe,type:"link",size:"large"},{default:i(()=>[s(e(de)),j(" "+g(e(o)().planEditor.button.addPayment)+" ",1),s(e(z),{open:w.value,placement:"right"},{title:i(()=>[p("span",{innerHTML:e(S)(e(o)().planEditor.desc.noAddlPayment)},null,8,ol)]),_:1},8,["open"])]),_:1},8,["disabled"])),[[e(It),Ze]])]),p("div",sl,[p("label",null,g(e(o)().planEditor.label.applyRestrictions),1),p("div",null,[s(e(ke),{checked:$.value,"onUpdate:checked":c[4]||(c[4]=a=>$.value=a),class:"apply-restrictions-switch"},{checkedChildren:i(()=>[s(e(Le))]),unCheckedChildren:i(()=>[s(e(oe))]),_:1},8,["checked"]),p("span",null,"  "+g(e(o)().planEditor.input.enabled),1)])]),$.value?(b(),N("div",il,[p("div",rl,[p("label",null,g(e(o)().planEditor.label.allowedWsRoles),1),s(e(z),{placement:"topLeft"},{title:i(()=>[p("span",{innerHTML:e(S)(e(o)().planEditor.label.allowedWsRolesToolTip)},null,8,ul)]),default:i(()=>[s(e(Z))]),_:1})]),p("p",null,[s(e(K),{value:G.value,"onUpdate:value":c[5]||(c[5]=a=>G.value=a),class:"select-role-restrictions",mode:"multiple",placeholder:e(o)().planEditor.placeholder.selectRoleRestrictions,options:e(A)().wholesaleRoles},null,8,["value","placeholder","options"])]),p("div",dl,[p("label",null,g(e(o)().planEditor.label.allowedUsers),1),s(e(z),{placement:"topLeft"},{title:i(()=>[p("span",{innerHTML:e(S)(e(o)().planEditor.label.allowedUsersToolTip)},null,8,cl)]),default:i(()=>[s(e(Z))]),_:1})]),p("p",null,[s(e(K),{value:I.value,"onUpdate:value":c[6]||(c[6]=a=>I.value=a),class:"allowed-users-restriction",mode:"multiple",placeholder:e(o)().planEditor.placeholder.selectAllowedUsers,options:ce.value,"not-found-content":Y.value?void 0:null,"filter-option":!1,"show-search":"","allow-clear":"",onSearch:e(et)},xe({_:2},[Y.value?{name:"notFoundContent",fn:i(()=>[s(ae)]),key:"0"}:void 0]),1032,["value","placeholder","options","not-found-content","onSearch"])])])):U("",!0),s(e(F),{align:"middle",class:"plan-editor-buttons"},{default:i(()=>[s(e(x),{span:"12"},{default:i(()=>[s(e(He),null,{default:i(()=>[s(e(Q),{type:"primary",disabled:m.value,onClick:Ye,size:"large",class:"form-action-btn action-btn-success"},{default:i(()=>[p("span",pl,g(e(o)().planEditor.button.savePaymentPlan),1),m.value?(b(),D(ae,{key:0,class:"wpay-tw-text-white"})):U("",!0)]),_:1},8,["disabled"]),C.value?(b(),D(e(Q),{key:0,onClick:ye,size:"large",class:"form-action-btn action-btn-default"},{default:i(()=>[j(g(e(o)().button.cancel),1)]),_:1})):(b(),D(e(Q),{key:1,onClick:ye,size:"large",class:"form-action-btn action-btn-default"},{default:i(()=>[j(g(e(o)().planEditor.button.cancelPaymentPlan),1)]),_:1}))]),_:1})]),_:1}),s(e(x),{offset:"4",span:"8",align:"right"},{default:i(()=>{var a,L;return[((L=(a=e(l))==null?void 0:a.post)==null?void 0:L.ID)!=null?(b(),D(e(Ue),{key:0,title:e(o)().planEditor.notice.deletePlan,onConfirm:Ke,"ok-text":e(o)().planEditor.label.yes,"cancel-text":e(o)().planEditor.label.no},{default:i(()=>[s(e(Q),{size:"large",class:"wpay-tw-text-red-600 form-action-btn action-btn-default delete"},{default:i(()=>[s(e(bt)),p("span",fl,g(e(o)().planEditor.button.deletePlan),1),v.value?(b(),D(ae,{key:0})):U("",!0)]),_:1})]),_:1},8,["title","ok-text","cancel-text"])):U("",!0)]}),_:1})]),_:1})])):U("",!0)])}}}),en=Et(ml,[["__scopeId","data-v-ce15cea5"]]);export{en as default};
