import{a as s,N as at,O as ot,L as st,_ as it,$ as rt,j as b,w as j,g as V,a0 as H,S as ut,u as e,z as Ve,R as dt,d as ct,l as w,m as R,B as c,C as _,q as D,x as i,F as Z,D as pt,G as A,E as N,a1 as Re,a2 as ft}from"../../../../../common/vue.esm-bundler.Eb_t0ZuK.js";import{u as mt,a as vt,e as se}from"../../index.BUJcZo_5.js";import{i as o,p as C,l as B,g as yt}from"../../../../../common/index.ln50ek6N.js";import{u as ht}from"../../../../../common/index.BBWpbny_.js";import{I as $e,s as _t}from"../../../../../common/LoadingOutlined.BwWHly1W.js";import{_ as gt}from"../../../../../common/BreakdownDueLabel.vue_vue_type_script_setup_true_lang.DAWyiZw-.js";import{S as ie,c as wt}from"../../../../../common/Modal.CTSvrbAV.js";import{a as bt}from"../../../../../common/axios.Ce6w_M6R.js";import{a as q}from"../../../../../common/index.BWmZUCTt.js";import{C as Ne}from"../../../../../common/index.Q4Ca_hsJ.js";import{S as Et}from"../../../../../common/index.48pRU0nw.js";import{C as re}from"../../../../../common/CheckOutlined.2I5Jb425.js";import{a as K,I as ee}from"../../../../../common/InfoCircleFilled.CuIgY0ZM.js";import{T as z}from"../../../../../common/index.CugMjDrc.js";import{T as Ue,I as He}from"../../../../../common/index.P07xck3P.js";import{P as Ie,D as Pt}from"../../../../../common/DeleteOutlined.dGIg9UMc.js";import{S as Be}from"../../../../../common/index.salE0Mpj.js";import{S as te}from"../../../../../common/index.LVt160gK.js";import{B as Q}from"../../../../../common/index.DO4rv7yP.js";import{R as F}from"../../../../../common/index.CirbKzNG.js";import{C as M}from"../../../../../common/index.DyDRXpIC.js";import{_ as Ot}from"../../../../../common/_plugin-vue_export-helper.DlAUqK2U.js";import"../../../../../common/preload-helper.03U_i1H8.js";import"../../../../../common/zoom._5t9uMJA.js";import"../../../../../common/Compact.BekGZffk.js";import"../../../../../common/FormItemContext.kpf8ZKmg.js";import"../../../../../common/CloseCircleFilled.DLp4Uax1.js";import"../../../../../common/index.wAr7hMel.js";import"../../../../../common/pickAttrs.CO1oKgar.js";import"../../../../../common/styleChecker.Cz-BSt7T.js";import"../../../../../common/vnode.CxjOFO7d.js";import"../../../../../common/RightOutlined.BY8RmgBD.js";import"../../../../../common/firstNotUndefined.CLFzEa0p.js";import"../../../../../common/collapseMotion.BXIWmnEP.js";import"../../../../../common/ResizeObserver.es.B1PUzC5B.js";import"../../../../../common/index.B8aA5X96.js";import"../../../../../common/EyeOutlined.CfrxM5mT.js";import"../../../../../common/slide.Ctdi1QYn.js";import"../../../../../common/useFlexGapSupport.DGl5WWhP.js";var Ct={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"question-circle",theme:"outlined"};function je(t){for(var n=1;n<arguments.length;n++){var l=arguments[n]!=null?Object(arguments[n]):{},u=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(l).filter(function(p){return Object.getOwnPropertyDescriptor(l,p).enumerable}))),u.forEach(function(p){St(t,p,l[p])})}return t}function St(t,n,l){return n in t?Object.defineProperty(t,n,{value:l,enumerable:!0,configurable:!0,writable:!0}):t[n]=l,t}var pe=function(n,l){var u=je({},n,l.attrs);return s($e,je({},u,{icon:Ct}),null)};pe.displayName="QuestionCircleOutlined";pe.inheritAttrs=!1;var Tt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};function Ae(t){for(var n=1;n<arguments.length;n++){var l=arguments[n]!=null?Object(arguments[n]):{},u=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(l).filter(function(p){return Object.getOwnPropertyDescriptor(l,p).enumerable}))),u.forEach(function(p){kt(t,p,l[p])})}return t}function kt(t,n,l){return n in t?Object.defineProperty(t,n,{value:l,enumerable:!0,configurable:!0,writable:!0}):t[n]=l,t}var fe=function(n,l){var u=Ae({},n,l.attrs);return s($e,Ae({},u,{icon:Tt}),null)};fe.displayName="PlusCircleOutlined";fe.inheritAttrs=!1;function ne(t){return at()?(ot(t),!0):!1}const Qe=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Mt=t=>t!=null,xt=Object.prototype.toString,Dt=t=>xt.call(t)==="[object Object]",Fe=()=>{},qe=Lt();function Lt(){var t,n;return Qe&&((t=window==null?void 0:window.navigator)==null?void 0:t.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((n=window==null?void 0:window.navigator)==null?void 0:n.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function le(t){return Array.isArray(t)?t:[t]}function Rt(...t){if(t.length!==1)return st(...t);const n=t[0];return typeof n=="function"?it(rt(()=>({get:n,set:Fe}))):b(n)}function Nt(t,n,l){return j(t,n,{...l,immediate:!0})}const ae=Qe?window:void 0;function oe(t){var n;const l=H(t);return(n=l==null?void 0:l.$el)!=null?n:l}function ce(...t){const n=[],l=()=>{n.forEach(r=>r()),n.length=0},u=(r,m,v,E)=>(r.addEventListener(m,v,E),()=>r.removeEventListener(m,v,E)),p=V(()=>{const r=le(H(t[0])).filter(m=>m!=null);return r.every(m=>typeof m!="string")?r:void 0}),y=Nt(()=>{var r,m;return[(m=(r=p.value)==null?void 0:r.map(v=>oe(v)))!=null?m:[ae].filter(v=>v!=null),le(H(p.value?t[1]:t[0])),le(e(p.value?t[2]:t[1])),H(p.value?t[3]:t[2])]},([r,m,v,E])=>{if(l(),!(r!=null&&r.length)||!(m!=null&&m.length)||!(v!=null&&v.length))return;const S=Dt(E)?{...E}:E;n.push(...r.flatMap(P=>m.flatMap(T=>v.map(k=>u(P,T,k,S)))))},{flush:"post"}),g=()=>{y(),l()};return ne(l),g}function Ut(){const t=b(!1),n=dt();return n&&Ve(()=>{t.value=!0},n),t}function Ht(t){const n=Ut();return V(()=>(n.value,!!t()))}function It(t,n,l={}){const{window:u=ae,...p}=l;let y;const g=Ht(()=>u&&"MutationObserver"in u),r=()=>{y&&(y.disconnect(),y=void 0)},m=V(()=>{const P=H(t),T=le(P).map(oe).filter(Mt);return new Set(T)}),v=j(()=>m.value,P=>{r(),g.value&&P.size&&(y=new MutationObserver(n),P.forEach(T=>y.observe(T,p)))},{immediate:!0,flush:"post"}),E=()=>y==null?void 0:y.takeRecords(),S=()=>{v(),r()};return ne(S),{isSupported:g,stop:S,takeRecords:E}}function Bt(t,n,l={}){const{window:u=ae,document:p=u==null?void 0:u.document,flush:y="sync"}=l;if(!u||!p)return Fe;let g;const r=E=>{g==null||g(),g=E},m=ut(()=>{const E=oe(t);if(E){const{stop:S}=It(p,P=>{P.map(k=>[...k.removedNodes]).flat().some(k=>k===E||k.contains(E))&&n(P)},{window:u,childList:!0,subtree:!0});r(S)}},{flush:y}),v=()=>{m(),r()};return ne(v),v}function ze(t,n={}){const{delayEnter:l=0,delayLeave:u=0,triggerOnRemoval:p=!1,window:y=ae}=n,g=b(!1);let r;const m=v=>{const E=v?l:u;r&&(clearTimeout(r),r=void 0),E?r=setTimeout(()=>g.value=v,E):g.value=v};return y&&(ce(t,"mouseenter",()=>m(!0),{passive:!0}),ce(t,"mouseleave",()=>m(!1),{passive:!0}),p&&Bt(V(()=>oe(t)),()=>m(!1))),g}const jt={mounted(t,n){const l=n.value;if(typeof l=="function"){const u=ze(t);j(u,p=>l(p))}else{const[u,p]=l,y=ze(t,p);j(y,g=>u(g))}}};function ue(t){return typeof Window<"u"&&t instanceof Window?t.document.documentElement:typeof Document<"u"&&t instanceof Document?t.documentElement:t}function Ge(t){const n=window.getComputedStyle(t);if(n.overflowX==="scroll"||n.overflowY==="scroll"||n.overflowX==="auto"&&t.clientWidth<t.scrollWidth||n.overflowY==="auto"&&t.clientHeight<t.scrollHeight)return!0;{const l=t.parentNode;return!l||l.tagName==="BODY"?!1:Ge(l)}}function At(t){const n=t||window.event,l=n.target;return Ge(l)?!1:n.touches.length>1?!0:(n.preventDefault&&n.preventDefault(),!1)}const de=new WeakMap;function qt(t,n=!1){const l=b(n);let u=null,p="";j(Rt(t),r=>{const m=ue(H(r));if(m){const v=m;if(de.get(v)||de.set(v,v.style.overflow),v.style.overflow!=="hidden"&&(p=v.style.overflow),v.style.overflow==="hidden")return l.value=!0;if(l.value)return v.style.overflow="hidden"}},{immediate:!0});const y=()=>{const r=ue(H(t));!r||l.value||(qe&&(u=ce(r,"touchmove",m=>{At(m)},{passive:!1})),r.style.overflow="hidden",l.value=!0)},g=()=>{const r=ue(H(t));!r||!l.value||(qe&&(u==null||u()),r.style.overflow=p,de.delete(r),l.value=!1)};return ne(g),V({get(){return l.value},set(r){r?y():g()}})}function zt(){let t=!1;const n=b(!1);return(l,u)=>{if(n.value=u.value,t)return;t=!0;const p=qt(l,u.value);j(n,y=>p.value=y)}}zt();var We;const Xe=(We=window.wpayObj)!=null&&We.maxRequests?Number(window.wpayObj.maxRequests):8,Wt=Math.floor(1e3/Xe);let W=0;const Vt=(t={},n={})=>{const l=n.maxRequests||Xe,u=n.intervalInMs||Wt,p=bt.create({timeout:3e4,responseType:"json",headers:{"Content-Type":"application/json;charset=UTF-8","X-WP-Nonce":window.wpayObj.wpNonce,Nonce:window.wpayObj.wcNonce},baseURL:window.wpayObj.usersApiUrl,...t});return p.interceptors.request.use(y=>new Promise(g=>{let r=setInterval(()=>{W<l&&(W++,clearInterval(r),g(y))},u)})),p.interceptors.response.use(y=>(W=Math.max(0,W-1),Promise.resolve(y)),y=>(W=Math.max(0,W-1),Promise.reject({error:y.response.data}))),p},$t={class:"wpayment-plan-editor"},Qt={class:"editor-heading"},Ft={key:1,class:"payment-plan-details-container"},Gt={class:"editor-desc"},Xt={class:"plan-status-switch"},Yt={class:"edit-plan-field-label"},Jt=["innerHTML"],Zt={class:"edit-plan-field-label"},Kt=["innerHTML"],el={class:"breakdown-container"},tl={class:"breakdown-label"},ll=["innerHTML"],nl=["innerHTML"],al={class:"breakdown-label"},ol=["innerHTML"],sl={class:"add-breakdown-payment"},il=["innerHTML"],rl={class:"apply-restrictions-switch-container"},ul={key:0,class:"apply-restriction-fields"},dl={class:"edit-plan-field-label"},cl=["innerHTML"],pl={class:"edit-plan-field-label"},fl=["innerHTML"],ml={key:1,class:"apply-auto-charge-switch-container"},vl={class:"wpay-tw-inline-block wpay-tw-mr-2"},yl={class:"wpay-tw-inline-block wpay-tw-mr-2"},hl=ct({__name:"PaymentPlanEditor",setup(t){const n=ht(),{paymentPlan:l}=_t(n),u=mt(),p=vt(),{getQueryArgs:y}=window.wp.url,{sprintf:g}=window.wp.i18n,r=b(!1),m=b(!1),v=b(!1),E=b(!1),S=b(!1),P=b(!0),T=b(""),k=b(""),x=b([]),G=b([]),I=b([]),X=b(""),me=b([]),Y=b(!1),$=b(!1),J=b(!1);let Ye=e(P),ve="",ye="",he=[];const _e=()=>{var h,d,f,a,L,O,U,Ee,Pe,Oe,Ce,Se,Te,ke,Me,xe,De,Le;T.value=(d=(h=l.value)==null?void 0:h.post.post_title)!=null?d:"",k.value=(a=(f=l.value)==null?void 0:f.post.post_content)!=null?a:"",x.value=(O=(L=l.value)==null?void 0:L.breakdown)!=null?O:[],P.value=((U=l.value)==null?void 0:U.enabled)==="yes",G.value=window.lodash.isEmpty((Ee=l.value)==null?void 0:Ee.wholesale_roles)?[]:(Pe=l.value)==null?void 0:Pe.wholesale_roles,I.value=window.lodash.isEmpty((Oe=l.value)==null?void 0:Oe.allowed_users)?[]:(Ce=l.value)==null?void 0:Ce.allowed_users,$.value=((Se=l.value)==null?void 0:Se.apply_restrictions)==="yes",J.value=((Te=l.value)==null?void 0:Te.apply_auto_charge)==="yes",ve=T.value,ye=k.value,he=[...x.value],X.value=(De=(xe=(Me=(ke=l.value)==null?void 0:ke.breakdown)==null?void 0:Me[0])==null?void 0:xe.id)!=null?De:"",S.value=!1,(Le=I.value)!=null&&Le.length&&I.value.length>0&&be(I.value)};Ve(()=>{l.value==null&&u.query.edit!=null&&Number.isInteger(Number(u.query.edit))?(r.value=!0,n.getPaymentPlan(u.query.edit).then(h=>{l.value=h.data,_e()}).catch(h=>{q.error({message:o().notice.error,description:C(h.error.message)}),console.log(h)}).finally(()=>{r.value=!1})):_e()});const ge=()=>{const h=y(B().adminBaseUrl);if(!S.value){p.push({query:{...h}});return}wt({title:o().planEditor.notice.unsavedChanges,content:o().planEditor.notice.unsavedChangesDesc,okText:o().planEditor.label.yes,cancelText:o().planEditor.label.no,onOk:()=>{p.push({query:{...h}})}})},we=V(()=>!(x.value.some(d=>d.due.type==="fixed")||x.value.reduce((d,f)=>f.due.type==="percentage"?d+Number(f.due.value):d,0)<100)),Je=()=>{const h={id:yt(),day:x.value.length<1?"0":String(x.value.reduce((d,f)=>isNaN(f.day)&&(f==null?void 0:f.day_display)!=null?d+Number(f==null?void 0:f.day_display):d+Number(f.day),0)+30),day_format:"day",due:{type:"fixed",value:0},payment_reminder:{enabled:!1,day:1},overdue_reminder:{enabled:!1,day:1}};x.value.push(h),X.value=h.id},Ze=()=>{var f,a,L,O;const h={set_status:"no",title:T.value,description:k.value,breakdown:x.value,enabled:P.value?"yes":"no",wholesale_roles:(f=G.value)!=null?f:[],allowed_users:(a=I.value)!=null?a:[],apply_restrictions:$.value?"yes":"no",apply_auto_charge:J.value?"yes":"no"},d=(O=(L=l.value)==null?void 0:L.post.ID)!=null?O:"";m.value=!0,n.savePaymentPlan(h,d).then(U=>{q.success({message:o().notice.success,description:C(U.data.message)}),S.value=!1,u.query.edit==="new"&&(l.value=U.data.plan,p.push({query:{...y(B().adminBaseUrl),edit:U.data.plan.post.ID},replace:!0}))}).catch(U=>{q.error({message:o().notice.error,description:C(U.error.message)}),console.log(U)}).finally(()=>{m.value=!1})},Ke=h=>{x.value.splice(h,1)},et=h=>{E.value=h&&we.value},tt=()=>{var d;const h=(d=l.value)==null?void 0:d.post.ID;v.value=!0,n.deletePaymentPlan(h).then(f=>{q.success({message:o().notice.success,description:C(f.data.message)}),p.push({query:{...y(B().adminBaseUrl)}})}).catch(f=>{q.error({message:o().notice.error,description:C(f.error.message)}),console.log(f)}).finally(()=>{v.value=!1})},be=h=>{let d={_fields:"id,name,display_name",search:"",include:""};typeof h=="string"?d={...d,search:h}:d={...d,include:h.join(",")},Y.value=!0,Vt().get("/",{params:d}).then(f=>{me.value=f.data.map(a=>({label:a.display_name,value:a.id,key:a.id}))}).catch(f=>{q.error({message:o().notice.error,description:C(f.error.message)}),console.log(f)}).finally(()=>{Y.value=!1})},lt=window.lodash.debounce(be,500),nt=Ne.Panel;return j([()=>P.value,()=>T.value,()=>k.value,()=>x.value],([h,d,f,a])=>{h!==Ye||d!==ve||f!==ye||JSON.stringify(a)!==JSON.stringify(he)?S.value=!0:S.value=!1},{deep:!0}),(h,d)=>{var f;return w(),R("div",$t,[c("h3",Qt,_(e(o)().heading.editPaymentPlan.label),1),r.value?(w(),D(e(Et),{key:0,active:!0,title:!1,paragraph:{rows:3,width:["90%","90%","90%"]}})):e(l)||((f=e(u).query)==null?void 0:f.edit)==="new"?(w(),R("div",Ft,[c("p",Gt,_(e(o)().heading.editPaymentPlan.desc),1),c("div",Xt,[c("label",null,_(e(o)().planEditor.label.planEnabled),1),c("div",null,[s(e(ie),{checked:P.value,"onUpdate:checked":d[0]||(d[0]=a=>P.value=a),class:"plan-enable-switch"},{checkedChildren:i(()=>[s(e(re))]),unCheckedChildren:i(()=>[s(e(K))]),_:1},8,["checked"]),c("span",null,"  "+_(e(o)().planEditor.input.enabled),1)])]),c("div",Yt,[c("label",null,_(e(o)().planEditor.label.planName),1),s(e(z),{placement:"topLeft"},{title:i(()=>[c("span",{innerHTML:e(C)(e(o)().planEditor.label.planNameTooltip)},null,8,Jt)]),default:i(()=>[s(e(ee))]),_:1})]),s(e(Ue),{value:T.value,"onUpdate:value":d[1]||(d[1]=a=>T.value=a),placeholder:e(o)().planEditor.placeholder.planName},null,8,["value","placeholder"]),c("div",Zt,[c("label",null,_(e(o)().planEditor.label.planDesc),1),s(e(z),{placement:"topLeft"},{title:i(()=>[c("span",{innerHTML:e(C)(e(o)().planEditor.label.planDescTooltip)},null,8,Kt)]),default:i(()=>[s(e(ee))]),_:1})]),s(e(Ue),{value:k.value,"onUpdate:value":d[2]||(d[2]=a=>k.value=a),placeholder:e(o)().planEditor.placeholder.planDesc,"auto-size":{minRows:3,maxRows:10}},null,8,["value","placeholder"]),c("p",null,[c("strong",null,_(e(o)().planEditor.desc.planDesc),1)]),c("div",el,[c("p",null,[c("label",null,_(e(o)().planEditor.label.planBreakdown),1)]),s(e(Ne),{"active-key":X.value,"onUpdate:activeKey":d[3]||(d[3]=a=>X.value=a),bordered:!1},{default:i(()=>[(w(!0),R(Z,null,pt(x.value,(a,L)=>(w(),D(e(nt),{key:a.id},{header:i(()=>[s(e(F),null,{default:i(()=>[s(e(M),{span:"6",class:"plan-breakdown-day"},{default:i(()=>[(a==null?void 0:a.day_format)==="timestamp"?(w(),R(Z,{key:0},[A(_(a.day_display),1)],64)):a!=null&&a.day_display?(w(),R(Z,{key:1},[A(_(e(o)().planEditor.label.day.replace("%d",a==null?void 0:a.day_display)),1)],64)):(w(),R(Z,{key:2},[A(_(e(o)().planEditor.label.day.replace("%d",a.day)),1)],64))]),_:2},1024),s(e(M),{span:"14",class:"plan-breakdown-due"},{default:i(()=>[s(gt,{due:a.due},null,8,["due"])]),_:2},1024),s(e(M),{span:"4",class:"plan-breakdown-action"},{default:i(()=>[s(e(Ie),{title:e(o)().planEditor.notice.deleteBreakdown,onConfirm:O=>Ke(L),"ok-text":e(o)().planEditor.label.yes,"cancel-text":e(o)().planEditor.label.no},{default:i(()=>[s(e(K)),c("span",null,"  "+_(e(o)().planEditor.label.planDeleteBreakdown),1)]),_:2},1032,["title","onConfirm","ok-text","cancel-text"])]),_:2},1024)]),_:2},1024)]),default:i(()=>[s(e(F),{gutter:8,align:"middle"},{default:i(()=>[s(e(M),{span:"6",class:"label"},{default:i(()=>[c("p",tl,_(e(o)().planEditor.label.breakdown.dayAfterOrder),1)]),_:2},1024),s(e(M),{span:"6",class:"input"},{default:i(()=>[s(e(He),{value:a.day,"onUpdate:value":O=>a.day=O,placeholder:e(o)().planEditor.placeholder.day.replace("%d",a.day),class:"breakdown-input"},null,8,["value","onUpdate:value","placeholder"])]),_:2},1024),s(e(M),{span:"12"},{default:i(()=>[e(B)().enabledAdvDueDays?(w(),D(e(Be),{key:0},{default:i(()=>[s(e(te),{value:a.day_format,"onUpdate:value":O=>a.day_format=O,placeholder:e(o)().planEditor.label.selectFormat,options:[{label:e(o)().planEditor.input.day,value:"day"},{label:e(o)().planEditor.input.custom,value:"custom"},{label:e(o)().planEditor.input.timestamp,value:"timestamp"}],class:"breakdown-select"},null,8,["value","onUpdate:value","placeholder","options"]),["custom","timestamp"].includes(a.day_format)&&!e(window.lodash.isEmpty)(a.day)?(w(),D(e(z),{key:0,placement:"right"},{title:i(()=>[a.day_format==="custom"?(w(),R("span",{key:0,innerHTML:e(C)(e(g)(e(o)().planEditor.desc.customDesc,a.day))},null,8,ll)):a.day_format==="timestamp"?(w(),R("span",{key:1,innerHTML:e(C)(e(g)(e(o)().planEditor.desc.timestampDesc,a.day))},null,8,nl)):N("",!0)]),default:i(()=>[s(e(pe))]),_:2},1024)):N("",!0)]),_:2},1024)):N("",!0)]),_:2},1024)]),_:2},1024),s(e(F),{gutter:8,align:"middle"},{default:i(()=>[s(e(M),{span:"6",class:"label"},{default:i(()=>[c("p",al,_(e(o)().planEditor.label.breakdown.amountDue),1)]),_:2},1024),s(e(M),{span:"6",class:"input"},{default:i(()=>[s(e(te),{value:a.due.type,"onUpdate:value":O=>a.due.type=O,options:[{label:e(o)().planEditor.input.fixed,value:"fixed"},{label:e(o)().planEditor.input.percentage,value:"percentage"},{label:e(o)().planEditor.input.none,value:"none"}],class:"breakdown-select"},null,8,["value","onUpdate:value","options"])]),_:2},1024),s(e(M),{span:"12",class:"label"})]),_:2},1024),s(e(F),{gutter:8,align:"middle"},{default:i(()=>[s(e(M),{offset:"6",span:"6",class:"input"},{default:i(()=>[a.due.type==="fixed"||a.due.type==="percentage"?(w(),D(e(He),{key:0,value:a.due.value,"onUpdate:value":O=>a.due.value=O,placeholder:e(o)().planEditor.placeholder.amountDue,class:"wpay-tw-w-[9.8rem] breakdown-input-group","addon-after":a.due.type==="percentage"?"%":""},Re({_:2},[a.due.type==="fixed"?{name:"addonBefore",fn:i(()=>[c("span",{innerHTML:e(C)(e(B)().currencySymbol)},null,8,ol)]),key:"0"}:void 0]),1032,["value","onUpdate:value","placeholder","addon-after"])):N("",!0)]),_:2},1024),s(e(M),{span:"12",class:"label"})]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["active-key"])]),c("p",sl,[ft((w(),D(e(Q),{class:"add-breakdown-payment-btn",disabled:we.value,onClick:Je,type:"link",size:"large"},{default:i(()=>[s(e(fe)),A(" "+_(e(o)().planEditor.button.addPayment)+" ",1),s(e(z),{open:E.value,placement:"right"},{title:i(()=>[c("span",{innerHTML:e(C)(e(o)().planEditor.desc.noAddlPayment)},null,8,il)]),_:1},8,["open"])]),_:1},8,["disabled"])),[[e(jt),et]])]),c("div",rl,[c("label",null,_(e(o)().planEditor.label.applyRestrictions),1),c("div",null,[s(e(ie),{checked:$.value,"onUpdate:checked":d[4]||(d[4]=a=>$.value=a),class:"apply-restrictions-switch"},{checkedChildren:i(()=>[s(e(re))]),unCheckedChildren:i(()=>[s(e(K))]),_:1},8,["checked"]),c("span",null,"  "+_(e(o)().planEditor.input.enabled),1)])]),$.value?(w(),R("div",ul,[c("div",dl,[c("label",null,_(e(o)().planEditor.label.allowedWsRoles),1),s(e(z),{placement:"topLeft"},{title:i(()=>[c("span",{innerHTML:e(C)(e(o)().planEditor.label.allowedWsRolesToolTip)},null,8,cl)]),default:i(()=>[s(e(ee))]),_:1})]),c("p",null,[s(e(te),{value:G.value,"onUpdate:value":d[5]||(d[5]=a=>G.value=a),class:"select-role-restrictions",mode:"multiple",placeholder:e(o)().planEditor.placeholder.selectRoleRestrictions,options:e(B)().wholesaleRoles},null,8,["value","placeholder","options"])]),c("div",pl,[c("label",null,_(e(o)().planEditor.label.allowedUsers),1),s(e(z),{placement:"topLeft"},{title:i(()=>[c("span",{innerHTML:e(C)(e(o)().planEditor.label.allowedUsersToolTip)},null,8,fl)]),default:i(()=>[s(e(ee))]),_:1})]),c("p",null,[s(e(te),{value:I.value,"onUpdate:value":d[6]||(d[6]=a=>I.value=a),class:"allowed-users-restriction",mode:"multiple",placeholder:e(o)().planEditor.placeholder.selectAllowedUsers,options:me.value,"not-found-content":Y.value?void 0:null,"filter-option":!1,"show-search":"","allow-clear":"",onSearch:e(lt)},Re({_:2},[Y.value?{name:"notFoundContent",fn:i(()=>[s(se)]),key:"0"}:void 0]),1032,["value","placeholder","options","not-found-content","onSearch"])])])):N("",!0),e(B)().autoChargeInvoices?(w(),R("div",ml,[c("label",null,_(e(o)().planEditor.label.applyAutoCharge),1),c("div",null,[s(e(ie),{checked:J.value,"onUpdate:checked":d[7]||(d[7]=a=>J.value=a),class:"apply-auto-charge-switch"},{checkedChildren:i(()=>[s(e(re))]),unCheckedChildren:i(()=>[s(e(K))]),_:1},8,["checked"]),c("span",null,"  "+_(e(o)().planEditor.input.enabled),1)])])):N("",!0),s(e(F),{align:"middle",class:"plan-editor-buttons"},{default:i(()=>[s(e(M),{span:"12"},{default:i(()=>[s(e(Be),null,{default:i(()=>[s(e(Q),{type:"primary",disabled:m.value,onClick:Ze,size:"large",class:"form-action-btn action-btn-success"},{default:i(()=>[c("span",vl,_(e(o)().planEditor.button.savePaymentPlan),1),m.value?(w(),D(se,{key:0,class:"wpay-tw-text-white"})):N("",!0)]),_:1},8,["disabled"]),S.value?(w(),D(e(Q),{key:0,onClick:ge,size:"large",class:"form-action-btn action-btn-default"},{default:i(()=>[A(_(e(o)().button.cancel),1)]),_:1})):(w(),D(e(Q),{key:1,onClick:ge,size:"large",class:"form-action-btn action-btn-default"},{default:i(()=>[A(_(e(o)().planEditor.button.cancelPaymentPlan),1)]),_:1}))]),_:1})]),_:1}),s(e(M),{offset:"4",span:"8",align:"right"},{default:i(()=>{var a,L;return[((L=(a=e(l))==null?void 0:a.post)==null?void 0:L.ID)!=null?(w(),D(e(Ie),{key:0,title:e(o)().planEditor.notice.deletePlan,onConfirm:tt,"ok-text":e(o)().planEditor.label.yes,"cancel-text":e(o)().planEditor.label.no},{default:i(()=>[s(e(Q),{size:"large",class:"wpay-tw-text-red-600 form-action-btn action-btn-default delete"},{default:i(()=>[s(e(Pt)),c("span",yl,_(e(o)().planEditor.button.deletePlan),1),v.value?(w(),D(se,{key:0})):N("",!0)]),_:1})]),_:1},8,["title","ok-text","cancel-text"])):N("",!0)]}),_:1})]),_:1})])):N("",!0)])}}}),nn=Ot(hl,[["__scopeId","data-v-f39f1ebc"]]);export{nn as default};
