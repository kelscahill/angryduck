import{j as P}from"./vue.esm-bundler.Eb_t0ZuK.js";import{U as R}from"./LoadingOutlined.BwWHly1W.js";import{a as I}from"./axios.Ce6w_M6R.js";import{l as y}from"./index.ln50ek6N.js";var v;const j=(v=window.wpayObj)!=null&&v.maxRequests?Number(window.wpayObj.maxRequests):8,b=Math.floor(1e3/j);let i=0;const m=(s={},a={})=>{const r=a.maxRequests||j,p=a.intervalInMs||b,n=I.create({timeout:3e4,responseType:"json",headers:{"Content-Type":"application/json;charset=UTF-8","X-WP-Nonce":window.wpayObj.wpNonce,Nonce:window.wpayObj.wcNonce},baseURL:window.wpayObj.paymentPlanApiUrl,...s});return n.interceptors.request.use(e=>new Promise(u=>{let w=setInterval(()=>{i<r&&(i++,clearInterval(w),u(e))},p)})),n.interceptors.response.use(e=>(i=Math.max(0,i-1),Promise.resolve(e)),e=>(i=Math.max(0,i-1),Promise.reject({error:e.response.data}))),n};var d;const N=(d=window.wpayObj)!=null&&d.maxRequests?Number(window.wpayObj.maxRequests):8,x=Math.floor(1e3/N);let c=0;const U=(s={},a={})=>{const r=a.maxRequests||N,p=a.intervalInMs||x,n=I.create({timeout:3e4,responseType:"json",headers:{"Content-Type":"application/json;charset=UTF-8","X-WP-Nonce":window.wpayObj.wpNonce,Nonce:window.wpayObj.wcNonce},baseURL:window.wpayObj.invoicesApiUrl,...s});return n.interceptors.request.use(e=>new Promise(u=>{let w=setInterval(()=>{c<r&&(c++,clearInterval(w),u(e))},p)})),n.interceptors.response.use(e=>(c=Math.max(0,c-1),Promise.resolve(e)),e=>(c=Math.max(0,c-1),Promise.reject({error:e.response.data}))),n},T=R("stripeStore",()=>{const s=P({total:0,totalPages:0,currentPage:1,data:[]}),a=P(null),r=P({total:0,currentPage:1,data:[],statuses:[],customers:[]}),p=P(null);return{paymentPlans:s,getPaymentPlans:(t={})=>{const o={posts_per_page:12,...t};return m().get("",{baseURL:"".concat(y().paymentPlanApiUrl,"s"),params:o}).then(l=>(s.value=l.data,l))},paymentPlan:a,getPaymentPlan:t=>m().get("".concat(t)),savePaymentPlan:(t,o="")=>o?m().put("".concat(o),t):m().post("",t),deletePaymentPlan:t=>m().delete("".concat(t)),paymentInvoices:r,getInvoices:(t={})=>{const o={limit:-1,...t};return U().get("",{baseURL:"".concat(y().invoicesApiUrl,"s"),params:o}).then(l=>(r.value=l.data,l))},paymentInvoice:p}});export{m as p,T as u};
