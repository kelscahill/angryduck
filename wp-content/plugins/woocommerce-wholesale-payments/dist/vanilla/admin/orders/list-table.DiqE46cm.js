import{r as u}from"../../../common/rymeraStripeApi.BfXVHAlT.js";import{i as o,p as f}from"../../../common/index.ln50ek6N.js";import"../../../common/axios.Ce6w_M6R.js";import"../../../common/vue.esm-bundler.Eb_t0ZuK.js";function h(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}const{sprintf:m}=window.wp.i18n,{gmdate:y}=window.wp.date;(function(n){const t={$wrapper:null,init:function(){n(".wpay-status-overdue, .wpay-status-pending").on("click.wpay",function(p){var r;p.stopPropagation();const a=n(this);t.$wrapper=a.closest(".wpay-status");const i=parseInt(t.$wrapper.closest("tr").prop("id").replace("post-","").replace("order-",""));t.toggleCheckStatus(),(r=t.$wrapper)==null||r.find(".status-text").html(o().checking),u().get("/orders/".concat(i,"/status")).then(e=>{var c,d,l;const{progress:{status:s,ts:w}}=e.data;(c=t.$wrapper)==null||c.find(".status-text").html(m(o().status[s],y("F d, Y",new Date(w*1e3)))),(d=t.$wrapper)==null||d.removeClass().addClass("wpay-status wpay-status-".concat(s)),s==="paid"&&((l=t.$wrapper)==null||l.find(".order-wpay-status-check").remove(),a.off("click.wpay"))}).catch(({error:e})=>{var s;console.log(e),(s=t.$wrapper)==null||s.find(".status-text").html(f('<span class="error" title="'.concat(e.message,'">').concat(o().error," ").concat(e.code,"</span>")))}).finally(function(){t.toggleCheckStatus("stop")})})},toggleCheckStatus:p=>{var a,i,r,e,s;p==="stop"?(a=t.$wrapper)==null||a.find(".order-wpay-status-check").removeClass("spin"):p==="spin"?(i=t.$wrapper)==null||i.find(".order-wpay-status-check").addClass("spin"):(r=t.$wrapper)!=null&&r.find(".order-wpay-status-check").hasClass("spin")?(e=t.$wrapper)==null||e.find(".order-wpay-status-check").removeClass("spin"):(s=t.$wrapper)==null||s.find(".order-wpay-status-check").addClass("spin")}};n(function(){t.init()})})(jQuery);export{h as __vite_legacy_guard};
