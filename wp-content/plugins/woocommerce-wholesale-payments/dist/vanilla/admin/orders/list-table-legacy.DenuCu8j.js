System.register(["../../../common/rymeraStripeApi-legacy.DYpbTXjJ.js","../../../common/index-legacy.CrPvcMca.js","../../../common/axios-legacy.CLDmrO42.js","../../../common/vue.esm-bundler-legacy.WK047frM.js"],(function(s,e){"use strict";var t,a,r;return{setters:[s=>{t=s.r},s=>{a=s.i,r=s.p},null,null],execute:function(){const{sprintf:s}=window.wp.i18n,{gmdate:e}=window.wp.date;!function(n){const o={$wrapper:null,init:function(){n(".wpay-status-overdue, .wpay-status-pending").on("click.wpay",(function(p){var i;p.stopPropagation();const l=n(this);o.$wrapper=l.closest(".wpay-status");const c=parseInt(o.$wrapper.closest("tr").prop("id").replace("post-","").replace("order-",""));o.toggleCheckStatus(),null===(i=o.$wrapper)||void 0===i||i.find(".status-text").html(a().checking),t().get(`/orders/${c}/status`).then((t=>{var r,n;const{progress:{status:p,ts:i}}=t.data;var c;null===(r=o.$wrapper)||void 0===r||r.find(".status-text").html(s(a().status[p],e("F d, Y",new Date(1e3*i)))),null===(n=o.$wrapper)||void 0===n||n.removeClass().addClass(`wpay-status wpay-status-${p}`),"paid"===p&&(null===(c=o.$wrapper)||void 0===c||c.find(".order-wpay-status-check").remove(),l.off("click.wpay"))})).catch((({error:s})=>{var e;console.log(s),null===(e=o.$wrapper)||void 0===e||e.find(".status-text").html(r(`<span class="error" title="${s.message}">${a().error} ${s.code}</span>`))})).finally((function(){o.toggleCheckStatus("stop")}))}))},toggleCheckStatus:s=>{var e,t;if("stop"===s)null===(t=o.$wrapper)||void 0===t||t.find(".order-wpay-status-check").removeClass("spin");else if("spin"===s){var a;null===(a=o.$wrapper)||void 0===a||a.find(".order-wpay-status-check").addClass("spin")}else if(null!==(e=o.$wrapper)&&void 0!==e&&e.find(".order-wpay-status-check").hasClass("spin")){var r;null===(r=o.$wrapper)||void 0===r||r.find(".order-wpay-status-check").removeClass("spin")}else{var n;null===(n=o.$wrapper)||void 0===n||n.find(".order-wpay-status-check").addClass("spin")}}};n((function(){o.init()}))}(jQuery)}}}));
